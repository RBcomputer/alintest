<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestionale AlinSystem</title>
    <link rel="icon" type="image/png" href="https://github.com/RBcomputer/Logo/blob/main/logo%20alin.PNG?raw=true" />
    <link rel="apple-touch-icon" href="https://github.com/RBcomputer/Logo/blob/main/logo%20alin.PNG?raw=true" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script>
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        document.addEventListener('DOMContentLoaded', function () {
            if (isMobile()) {
                document.body.classList.add('mobile');
            }
        });
    </script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --background-color: #f4f6f9;
            --text-color: #34495e;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --highlight-color: #e74c3c;
            --sidebar-width: 250px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Roboto", sans-serif;
            line-height: 1.6;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--primary-color);
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            overflow-y: auto;
            padding: 20px;
        }

        .sidebar h1 {
            margin-bottom: 30px;
            font-size: 1.5em;
            text-align: center;
        }

        .nav-buttons {
            display: flex;
            flex-direction: column;
        }

        .nav-buttons button {
            background-color: transparent;
            border: none;
            color: white;
            padding: 12px 20px;
            text-align: left;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .nav-buttons button:hover,
        .nav-buttons button.active {
            background-color: var(--secondary-color);
        }

        .nav-buttons button i {
            margin-right: 10px;
        }

        .main-content {
            margin-left: var(--sidebar-width);
            padding: 20px;
            flex-grow: 1;
            padding-bottom: 40px;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
        }

        textarea#tipoIntervento {
            min-height: 100px;
            resize: vertical;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        .table-responsive {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
        }

        th,
        td {
            text-align: left;
            padding: 12px;
            border: 1px solid #ddd;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            border-bottom: 2px solid #3498db;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 8px;
        }

        #areaFirma,
        #areaFirmaCollaudo {
            border: 1px solid #000;
            width: 100%;
            max-width: 300px;
            height: 150px;
            display: block;
            margin: 10px auto;
            touch-action: none;
        }

        .stato-appuntamento {
            padding: 3px 6px;
            border-radius: 3px;
            font-size: 0.8em;
        }

        .da-completare {
            background-color: var(--warning-color);
            color: white;
        }

        .completato {
            background-color: var(--success-color);
            color: white;
        }

        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: rgba(255, 255, 255, 0.9);
            color: #333;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            top: 30px;
            transform: translateX(-50%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        #toast.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @keyframes fadein {
            from {
                top: 0;
                opacity: 0;
            }

            to {
                top: 30px;
                opacity: 1;
            }
        }

        @keyframes fadeout {
            from {
                top: 30px;
                opacity: 1;
            }

            to {
                top: 0;
                opacity: 0;
            }
        }

        .hidden {
            display: none !important;
        }

        .notifica-counter {
            display: inline-block;
            background-color: var(--highlight-color);
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        .azioni-intervento {
            display: flex;
            gap: 5px;
        }

        .azioni-intervento button {
            padding: 5px 10px;
            font-size: 0.9em;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-modifica {
            background-color: #3498db;
        }

        .btn-pianifica {
            background-color: #2ecc71;
        }

        .btn-collaudo {
            background-color: #f39c12;
        }

        .btn-pdf {
            background-color: #3498db;
        }

        .btn-elimina {
            background-color: #e74c3c;
        }

        .btn-ripristina {
            background-color: #1abc9c;
        }

        .azioni-intervento button:hover {
            opacity: 0.8;
        }

        #formModifica label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }

        #formModifica input,
        #formModifica textarea,
        #formModifica select {
            width: 100%;
            padding: 5px;
            margin-top: 5px;
        }

        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: var(--background-color);
            z-index: 1000;
            padding-bottom: 40px;
        }

        .login-box {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 90%;
            max-width: 350px;
            margin: 0 auto;
        }

        .login-header {
            margin-bottom: 20px;
        }

        .login-logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
            background-image: url("https://github.com/RBcomputer/Logo/blob/main/logo%20alin.PNG?raw=true");
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            border: 3px solid var(--primary-color);
        }

        .login-welcome {
            color: var(--text-color);
            margin-bottom: 20px;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-group i {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }

        .input-group input {
            padding-left: 35px;
        }

        .login-button {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .login-button:hover {
            background-color: var(--secondary-color);
        }

        .nota {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .nota h3 {
            margin-bottom: 10px;
        }

        .nota p {
            margin-bottom: 10px;
        }

        .azioni-nota {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
        }

        .azioni-nota button {
            margin-left: 10px;
        }

        .btn-modifica {
            background-color: var(--primary-color);
        }

        .btn-elimina {
            background-color: var(--highlight-color);
        }

        .calendario-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendario-header button {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: black;
            padding: 0 10px;
        }

        .calendario-header button:hover {
            color: var(--primary-color);
        }

        .calendario-header h2 {
            margin: 0 10px;
        }

        .calendario-body {
            display: block;
        }

        #calendario {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        #eventiGiorno {
            margin-top: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
        }

        .calendario-giorno {
            text-align: center;
            padding: 10px;
            background-color: white;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            position: relative;
        }

        .calendario-giorno.oggi {
            background-color: #e6f3ff;
            font-weight: bold;
        }

        .calendario-giorno.con-eventi {
            background-color: #d4edda;
        }

        .calendario-giorno.con-eventi::after {
            content: "";
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background-color: var(--primary-color);
            border-radius: 50%;
        }

        .calendario-giorno.selezionato {
            background-color: #007bff;
            color: white;
        }

        #prossimiEventi {
            margin-top: 20px;
        }

        #listaEventi,
        #listaEventiGiorno {
            list-style-type: none;
            padding: 0;
        }

        #listaEventi li,
        #listaEventiGiorno li {
            margin-bottom: 5px;
            padding: 5px;
            background-color: #e9ecef;
            border-radius: 3px;
        }

        #toast.success {
            background-color: #4caf50;
            color: white;
        }

        #toast.error {
            background-color: #f44336;
            color: white;
        }

        #toast.info {
            background-color: #2196f3;
            color: white;
        }

        .priorita-container {
            margin-bottom: 15px;
        }

        #priorita {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
        }

        .search-container {
            margin-bottom: 15px;
        }

        .search-container input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
        }

        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: var(--background-color);
            z-index: 1000;
            padding-bottom: 40px;
        }

        .copyright {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 5px 0;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            font-size: 0.9em;
            z-index: 2000;
        }

        /* Nasconde la barra copyright quando il login non è attivo */
        body:not(.login-active) .copyright {
            display: none;
        }

        /* Versione mobile */
        @media (max-width: 768px) {

            /* Mostra la barra copyright solo durante il login */
            .login-container~.copyright {
                display: block;
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
            }

            /* Nasconde la barra copyright quando il contenuto principale è visibile */
            .main-content:not(.hidden)~.copyright,
            .sidebar:not(.hidden)~.copyright {
                display: none;
            }
        }

        body.login-active .copyright {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
        }

        #interventoForm button[type="submit"] {
            margin-top: 20px;
        }

        .modal-collaudo {
            max-width: 600px;
            width: 90%;
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 30px;
            position: relative;
        }

        .modal-collaudo h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        .collaudo-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #555;
        }

        .form-group input[type="text"],
        .form-group input[type="date"],
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .role-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .role-button {
            padding: 10px 18px;
            background-color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            font-size: 16px;
            white-space: nowrap;
        }

        @media (max-width: 600px) {
            .role-button {
                padding: 9px 14px;
                font-size: 15px;
            }

            .modal-collaudo {
                padding: 22px;
            }
        }

        .role-button:hover {
            background-color: #3498db;
            color: white;
        }

        .role-button.selected {
            background-color: #2980b9;
            color: white;
        }

        .submit-button {
            align-self: center;
            padding: 12px 24px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s;
        }

        .submit-button:hover {
            background-color: #27ae60;
        }

        .mobile-header {
            display: none;
            background-color: var(--primary-color);
            padding: 10px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
        }

        .mobile .mobile-header {
            display: flex;
            align-items: center;
        }

        .mobile-header h1 {
            color: white;
            margin: 0;
            font-size: 1.2em;
            margin-left: 15px;
        }

        #menuToggle {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 10;
        }

        #menuToggle span {
            width: 30px;
            height: 3px;
            background: white;
            border-radius: 10px;
            transition: all 0.3s linear;
            position: relative;
            transform-origin: 1px;
        }

        .mobile .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: 80%;
            max-width: 300px;
            z-index: 1000;
            padding-top: 60px;
            overflow-y: auto;
        }

        .mobile .sidebar.open {
            transform: translateX(0);
        }

        .mobile .main-content {
            margin-left: 0;
            padding: 10px;
            padding-top: 60px;
            transition: transform 0.3s ease-in-out;
        }

        .mobile .main-content.sidebar-open {
            transform: translateX(80%);
        }

        .mobile .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .mobile .overlay.active {
            display: block;
        }

        /* Stili generali per mobile */
        .mobile body {
            font-size: 16px;
        }

        .mobile .main-content {
            margin-left: 0;
            padding: 10px;
            padding-top: 60px;
            /* Aggiunto per spostare il contenuto verso il basso */
        }

        /* Header mobile e menu hamburger */
        .mobile-header {
            display: none;
            background-color: var(--primary-color);
            padding: 10px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .mobile .mobile-header {
            display: flex;
            align-items: center;
        }

        .mobile-header h1 {
            color: white;
            margin: 0;
            font-size: 1.2em;
            margin-left: 15px;
        }

        #menuToggle {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 10;
        }

        #menuToggle span {
            width: 30px;
            height: 3px;
            background: white;
            border-radius: 10px;
            transition: all 0.3s linear;
            position: relative;
            transform-origin: 1px;
        }

        /* Sidebar per mobile */
        .mobile .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            position: fixed;
            top: 50px;
            /* Modificato per lasciare spazio all'header */
            left: 0;
            height: calc(100vh - 50px);
            /* Modificato per evitare sovrapposizioni */
            width: 80%;
            max-width: 300px;
            z-index: 1000;
            padding-top: 10px;
            /* Ridotto il padding */
        }

        .mobile .sidebar.open {
            transform: translateX(0);
        }

        /* Stili per le card degli interventi su mobile */
        .mobile .container {
            padding: 15px;
            margin-bottom: 15px;
            margin-top: 20px;
            /* Aggiunto per spaziare le card */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .mobile .container h2 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .mobile .table-responsive {
            overflow-x: visible;
        }

        .mobile table {
            display: block;
        }

        .mobile table,
        .mobile thead,
        .mobile tbody,
        .mobile th,
        .mobile td,
        .mobile tr {
            display: block;
        }

        .mobile thead tr {
            position: absolute;
            top: -9999px;
            left: -9999px;
        }

        .mobile tr {
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            background-color: #fff;
        }

        .mobile td {
            border: none;
            position: relative;
            padding-left: 50%;
            text-align: right;
        }

        .mobile td:before {
            content: attr(data-label);
            position: absolute;
            left: 6px;
            width: 45%;
            padding-right: 10px;
            white-space: nowrap;
            text-align: left;
            font-weight: bold;
        }

        .mobile .azioni-intervento {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
        }

        .mobile .azioni-intervento button {
            margin-left: 5px;
        }

        /* Adattamenti per il footer */
        .mobile .copyright {
            position: static;
            padding: 10px 0;
        }

        /* Adattamenti per i modali su mobile */
        .mobile .modal-content {
            width: 95%;
            max-width: none;
            margin: 60px auto 20px;
            /* Modificato per spostare i modali verso il basso */
        }

        #modalAppuntamento .modal-content {
            margin-top: 60px;
        }

        .mobile .calendario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .mobile .calendario-header button {
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
        }

        .mobile .calendario-header h2 {
            margin: 0;
            font-size: 1.2em;
        }

        .close-btn {
            position: absolute;
            right: 10px;
            top: 10px;
            font-size: 24px;
            background-color: transparent;
            border: none;
            color: #333;
            cursor: pointer;
            z-index: 1000;
            padding: 5px 10px;
        }

        .close-btn:hover {
            color: #f00;
        }

        .modal-collaudo {
            position: relative;
            padding-top: 40px;
        }

        @media (max-width: 768px) {
            .close-btn {
                top: 5px;
                right: 5px;
                font-size: 20px;
            }

            .modal-collaudo {
                padding-top: 30px;
            }

            .container:last-child {
                margin-bottom: 60px;
            }
        }
    </style>
</head>

<body>
    <div class="mobile-header">
        <button id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <h1>Gestione Interventi</h1>
    </div>

    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <div class="login-logo"></div>
                <h2>Accesso Gestionale Clienti</h2>
            </div>
            <p class="login-welcome">
                Benvenuto! Inserisci le tue credenziali per accedere.
            </p>
            <form id="loginForm">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="email" placeholder="Email" required />
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="password" placeholder="Password" required />
                </div>
                <button type="submit" class="login-button">Accedi</button>
            </form>
        </div>
    </div>

    <div class="sidebar">
        <h1>AlinSystem</h1>
        <div class="nav-buttons">
            <button id="btnNuovoCliente">
                <i class="fas fa-user-plus"></i> Nuovo Cliente
            </button>
            <button id="btnInterventi">
                <i class="fas fa-calendar-plus" style="color: #e74c3c"></i> Pianifica
                <span class="notifica-counter" id="interventiCounter">0</span>
            </button>
            <button id="btnInterventiInCorso">
                <i class="fas fa-hard-hat" style="color: #f39c12"></i> In corso
                <span class="notifica-counter" id="interventiInCorsoCounter">0</span>
            </button>
            <button id="btnInterventiCompletati">
                <i class="fas fa-check-circle" style="color: #2ecc71"></i> Completati
                <span class="notifica-counter" id="interventiCompletatiCounter">0</span>
            </button>
            <button id="btnRubrica">
                <i class="fas fa-address-book"></i> Rubrica
            </button>
            <button id="btnCalendario">
                <i class="fas fa-calendar-alt"></i> Calendario
            </button>
            <button id="btnCestino">
                <i class="fas fa-trash"></i> Cestino
                <span class="notifica-counter" id="cestinoCounter">0</span>
            </button>
            <button id="btnNote">
                <i class="fas fa-sticky-note" style="color: #ffd700"></i> Note
            </button>
            <button id="btnLogout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <div class="main-content">
        <div class="container" id="nuovoClienteForm">
            <h2>Nuovo Cliente</h2>
            <form id="interventoForm">
                <input type="text" id="cliente" placeholder="Cliente" />
                <input type="text" id="indirizzo" placeholder="Indirizzo" />
                <input type="text" id="titolo" placeholder="Titolo" />
                <textarea id="tipoIntervento" placeholder="Tipo di intervento"></textarea>
                <div class="priorita-container">
                    <label for="priorita">Priorità:</label>
                    <select id="priorita">
                        <option value="">Nessuna priorità</option>
                        <option value="#FF0000">Alta (Rosso)</option>
                        <option value="#FFA500">Media (Arancione)</option>
                        <option value="#90EE90">Bassa (Verde)</option>
                    </select>
                </div>
                <button type="submit">Salva</button>
            </form>
        </div>

        <div class="container" id="listaClienti" style="display: none">
            <h2>Interventi da pianificare</h2>
            <div class="table-responsive">
                <table id="tabellaClienti">
                    <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Indirizzo</th>
                            <th>Titolo</th>
                            <th>Tipo Intervento</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="container" id="interventiInCorso" style="display: none">
            <h2>Interventi in corso</h2>
            <div class="table-responsive">
                <table id="tabellaInterventiInCorso">
                    <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Indirizzo</th>
                            <th>Titolo</th>
                            <th>Tipo Intervento</th>
                            <th>Appuntamento</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="container" id="interventiCompletati" style="display: none">
            <h2>Interventi completati</h2>
            <div class="table-responsive">
                <table id="tabellaInterventiCompletati">
                    <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Indirizzo</th>
                            <th>Titolo</th>
                            <th>Tipo Intervento</th>
                            <th>Appuntamento</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="container" id="rubrica" style="display: none">
            <h2>Rubrica Clienti</h2>
            <div class="search-container">
                <input type="text" id="searchRubrica" placeholder="Cerca nella rubrica..." />
            </div>
            <div class="table-responsive">
                <table id="tabellaRubrica">
                    <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Indirizzo</th>
                            <th>Titolo</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="container" id="cestino" style="display: none">
            <h2>Cestino</h2>
            <button id="svuotaCestino">Svuota cestino</button>
            <div class="table-responsive">
                <table id="tabellaCestino">
                    <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Indirizzo</th>
                            <th>Titolo</th>
                            <th>Tipo Intervento</th>
                            <th>Appuntamento</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="container" id="listaNote" style="display: none">
            <h2>Le mie note</h2>
            <button id="nuovaNota" class="btn-primary">Nuova nota</button>
            <div class="search-container">
                <input type="text" id="searchNote" placeholder="Cerca nelle note..." />
            </div>
            <div id="elencoNote">
                <!-- Le note verranno inserite qui dinamicamente -->
            </div>
        </div>

        <div class="container" id="calendarioView" style="display: none">
            <div class="calendario-header">
                <button id="prevMonth">&lt;</button>
                <h2 id="meseAnno"></h2>
                <button id="nextMonth">&gt;</button>
            </div>
            <div class="calendario-body">
                <div id="calendario"></div>
            </div>
            <div id="eventiGiorno">
                <h3 id="dataSelezionata"></h3>
                <ul id="listaEventiGiorno"></ul>
            </div>
        </div>
    </div>

    <div id="modalAppuntamento" class="modal">
        <div class="modal-content">
            <h2>Pianifica Appuntamento</h2>
            <form id="formAppuntamento">
                <input type="date" id="dataAppuntamento" required />
                <input type="time" id="oraAppuntamento" />
                <button type="submit">Conferma Appuntamento</button>
            </form>
        </div>
    </div>

    <div id="modalCollaudo" class="modal">
        <div class="modal-content modal-collaudo">
            <button id="chiudiCollaudo" class="close-btn">&times;</button>
            <h2>Attestazione di Collaudo</h2>
            <form id="collaudoForm" class="collaudo-form">
                <div class="form-group">
                    <label for="dataCollaudo">Data:</label>
                    <input type="date" id="dataCollaudo" required />
                </div>

                <div class="form-group">
                    <label for="indirizzoCliente">Indirizzo:</label>
                    <input type="text" id="indirizzoCliente" required />
                </div>

                <div class="form-group">
                    <label for="capCittaProvinciaCliente">CAP|Città|Provincia:</label>
                    <input type="text" id="capCittaProvinciaCliente" required />
                </div>

                <div class="form-group">
                    <label for="nomeRappresentante">Nome Rappresentante:</label>
                    <input type="text" id="nomeRappresentante" required />
                </div>

                <div class="form-group">
                    <label>Ruolo:</label>
                    <div class="role-buttons">
                        <button type="button" class="role-button" data-role="AMMINISTRATORE">
                            AMMINISTRATORE
                        </button>
                        <button type="button" class="role-button" data-role="ALTRO">
                            ALTRO
                        </button>
                        <button type="button" class="role-button" data-role="CONDOMINE INTERNO">
                            CONDOMINE INTERNO
                        </button>
                    </div>
                    <input type="hidden" id="ruoloSelezionato" name="ruolo" required />
                </div>

                <div id="condominioInternoDetails" class="form-group" style="display: none">
                    <label for="dettagliCondomino">Dettagli Condomino:</label>
                    <input type="text" id="dettagliCondomino" placeholder="Inserisci i dettagli del condomino" />
                </div>

                <div class="form-group">
                    <label for="oggettoIntervento">Oggetto dell'intervento:</label>
                    <textarea id="oggettoIntervento" rows="4" required></textarea>
                </div>

                <button type="submit" class="submit-button">
                    Genera Documento di Collaudo
                </button>
            </form>
        </div>
    </div>

    <div id="modalFirmaCollaudo" class="modal">
        <div class="modal-content">
            <h2>Firma Documento di Collaudo</h2>
            <div class="collaudo-preview" id="collaudoPreview"></div>
            <canvas id="areaFirmaCollaudo"></canvas>
            <button id="confermaFirmaCollaudo">Conferma Firma e Salva</button>
        </div>
    </div>

    <div id="modalModifica" class="modal">
        <div class="modal-content">
            <h2>Modifica Intervento/Contatto</h2>
            <form id="formModifica">
                <label for="modCliente">Cliente:</label>
                <input type="text" id="modCliente" required />

                <label for="modIndirizzo">Indirizzo:</label>
                <input type="text" id="modIndirizzo" required />
                <label for="modTitolo">Titolo:</label>
                <input type="text" id="modTitolo" required />

                <label for="modTipoIntervento">Tipo di intervento:</label>
                <textarea id="modTipoIntervento"></textarea>

                <label for="modPriorita">Priorità:</label>
                <select id="modPriorita">
                    <option value="">Nessuna priorità</option>
                    <option value="#FF0000">Alta (Rosso)</option>
                    <option value="#FFA500">Media (Arancione)</option>
                    <option value="#90EE90">Bassa (Verde)</option>
                </select>

                <button type="submit">Salva Modifiche</button>
                <button type="button" id="annullaModifiche">Annulla</button>
            </form>
        </div>
    </div>

    <div id="modalNuovaNota" class="modal">
        <div class="modal-content">
            <h3>Nuova nota</h3>
            <input type="text" id="titoloNota" placeholder="Titolo della nota" />
            <textarea id="contenutoNota" placeholder="Contenuto della nota"></textarea>
            <button id="salvaNota">Salva</button>
            <button id="annullaNota">Annulla</button>
        </div>
    </div>

    <div id="toast"></div>

    <div class="copyright">
        Gestionale Clienti per AlinSystem - Roberto Bonifazi Copyright © 2024
        vbeta0.2.6
    </div>

    <script>
        const _0x2f75da = _0x3fcf; (function (_0x5d4e0c, _0x2495d1) { const _0x5b3df1 = _0x3fcf, _0x518e29 = _0x5d4e0c(); while (!![]) { try { const _0x32d15a = parseInt(_0x5b3df1(0x2dd)) / 0x1 + -parseInt(_0x5b3df1(0x2ed)) / 0x2 * (-parseInt(_0x5b3df1(0x2f5)) / 0x3) + -parseInt(_0x5b3df1(0x282)) / 0x4 + parseInt(_0x5b3df1(0x2ee)) / 0x5 + parseInt(_0x5b3df1(0x23c)) / 0x6 * (-parseInt(_0x5b3df1(0x274)) / 0x7) + parseInt(_0x5b3df1(0x28f)) / 0x8 + -parseInt(_0x5b3df1(0x262)) / 0x9 * (parseInt(_0x5b3df1(0x2ec)) / 0xa); if (_0x32d15a === _0x2495d1) break; else _0x518e29['push'](_0x518e29['shift']()); } catch (_0x1cdfc7) { _0x518e29['push'](_0x518e29['shift']()); } } }(_0x5a77, 0xcfd8c)); const { jsPDF } = window[_0x2f75da(0x2c1)], firebaseConfig = { 'apiKey': _0x2f75da(0x258), 'authDomain': 'alin-44851.firebaseapp.com', 'databaseURL': 'https://alin-44851-default-rtdb.firebaseio.com', 'projectId': _0x2f75da(0x25d), 'storageBucket': _0x2f75da(0x291), 'messagingSenderId': _0x2f75da(0x310), 'appId': _0x2f75da(0x28e), 'measurementId': _0x2f75da(0x322) }; firebase[_0x2f75da(0x202)](firebaseConfig); const db = firebase[_0x2f75da(0x1fd)](), auth = firebase['auth'](), storage = firebase[_0x2f75da(0x237)](), APP_ID = 'app_gestione_interventi', loginPage = document['getElementById']('loginPage'), loginForm = document[_0x2f75da(0x260)]('loginForm'), mainContent = document['querySelector'](_0x2f75da(0x2ff)), sidebarElement = document[_0x2f75da(0x25f)]('.sidebar'), btnNuovoCliente = document['getElementById'](_0x2f75da(0x324)), btnInterventi = document['getElementById'](_0x2f75da(0x298)), btnInterventiInCorso = document[_0x2f75da(0x260)](_0x2f75da(0x267)), btnInterventiCompletati = document[_0x2f75da(0x260)](_0x2f75da(0x232)), btnRubrica = document['getElementById']('btnRubrica'), btnCalendario = document[_0x2f75da(0x260)](_0x2f75da(0x300)), btnCestino = document[_0x2f75da(0x260)](_0x2f75da(0x2cd)), btnNote = document[_0x2f75da(0x260)](_0x2f75da(0x22b)), btnLogout = document[_0x2f75da(0x260)](_0x2f75da(0x22f)), nuovoClienteForm = document[_0x2f75da(0x260)](_0x2f75da(0x24d)), interventoForm = document['getElementById'](_0x2f75da(0x250)), listaClienti = document[_0x2f75da(0x260)](_0x2f75da(0x220)), tabellaClienti = document[_0x2f75da(0x260)]('tabellaClienti')[_0x2f75da(0x221)](_0x2f75da(0x1f2))[0x0], formAppuntamento = document[_0x2f75da(0x260)]('formAppuntamento'), modalCollaudo = document[_0x2f75da(0x260)](_0x2f75da(0x243)), collaudoForm = document[_0x2f75da(0x260)](_0x2f75da(0x32f)), modalFirmaCollaudo = document['getElementById'](_0x2f75da(0x230)), areaFirmaCollaudo = document['getElementById'](_0x2f75da(0x2db)), confermaFirmaCollaudo = document[_0x2f75da(0x260)](_0x2f75da(0x326)), interventiCompletati = document['getElementById'](_0x2f75da(0x2ae)), tabellaInterventiCompletati = document[_0x2f75da(0x260)](_0x2f75da(0x302))[_0x2f75da(0x221)]('tbody')[0x0], interventiInCorso = document[_0x2f75da(0x260)](_0x2f75da(0x1fa)), tabellaInterventiInCorso = document[_0x2f75da(0x260)]('tabellaInterventiInCorso')[_0x2f75da(0x221)](_0x2f75da(0x1f2))[0x0], rubrica = document['getElementById'](_0x2f75da(0x2a1)), tabellaRubrica = document[_0x2f75da(0x260)](_0x2f75da(0x253))['getElementsByTagName'](_0x2f75da(0x1f2))[0x0], cestino = document[_0x2f75da(0x260)]('cestino'), tabellaCestino = document['getElementById'](_0x2f75da(0x2b9))[_0x2f75da(0x221)]('tbody')[0x0], svuotaCestino = document[_0x2f75da(0x260)](_0x2f75da(0x2cc)), modalModifica = document['getElementById']('modalModifica'), formModifica = document['getElementById'](_0x2f75da(0x273)), listaNote = document[_0x2f75da(0x260)](_0x2f75da(0x234)), nuovaNota = document[_0x2f75da(0x260)](_0x2f75da(0x20f)), modalNuovaNota = document[_0x2f75da(0x260)](_0x2f75da(0x1ee)), titoloNota = document[_0x2f75da(0x260)](_0x2f75da(0x284)), contenutoNota = document[_0x2f75da(0x260)]('contenutoNota'), salvaNota = document[_0x2f75da(0x260)](_0x2f75da(0x33c)), annullaNota = document[_0x2f75da(0x260)](_0x2f75da(0x31b)), elencoNote = document['getElementById'](_0x2f75da(0x331)); let clienteSelezionato = null, isDrawing = ![], notaSelezionata = null, meseCorrente = new Date(); function _0x3fcf(_0x2e3516, _0x2ca6bb) { const _0x5a77a4 = _0x5a77(); return _0x3fcf = function (_0x3fcf4a, _0x2c699f) { _0x3fcf4a = _0x3fcf4a - 0x1e8; let _0x157343 = _0x5a77a4[_0x3fcf4a]; return _0x157343; }, _0x3fcf(_0x2e3516, _0x2ca6bb); } function formatDataItaliana(_0x249a45) { const _0x25cf13 = _0x2f75da; return _0x249a45[_0x25cf13(0x24c)](_0x25cf13(0x28a), { 'day': _0x25cf13(0x2f6), 'month': '2-digit', 'year': _0x25cf13(0x2c9) })[_0x25cf13(0x27a)](/\//g, '.'); } function formatOraItaliana(_0x83b2d4) { const _0x19a606 = _0x2f75da; return _0x83b2d4[_0x19a606(0x20e)]('it-IT', { 'hour': _0x19a606(0x2f6), 'minute': _0x19a606(0x2f6) }); } function showSuccessToast(_0x33b623) { showToast(_0x33b623, 'success'); } function showErrorToast(_0x4c7199) { const _0x8b7780 = _0x2f75da; showToast(_0x4c7199, _0x8b7780(0x206)); } function showToast(_0x24f746, _0x334de2 = _0x2f75da(0x2f2)) { const _0x2873a1 = _0x2f75da, _0x493d5b = document[_0x2873a1(0x260)](_0x2873a1(0x2d3)); _0x493d5b[_0x2873a1(0x248)] = _0x24f746, _0x493d5b['className'] = _0x2873a1(0x318) + _0x334de2, setTimeout(() => { const _0x4604b6 = _0x2873a1; _0x493d5b['className'] = _0x493d5b['className'][_0x4604b6(0x27a)]('show', ''); }, 0xbb8); } function changeActiveButton(_0x85d00e) { const _0x526119 = _0x2f75da; document[_0x526119(0x2e3)](_0x526119(0x28c))[_0x526119(0x1f8)](_0x37f8c9 => _0x37f8c9[_0x526119(0x204)][_0x526119(0x29b)](_0x526119(0x21e))), _0x85d00e[_0x526119(0x204)]['add'](_0x526119(0x21e)); } function nascondiElementiPrincipali() { const _0x39dd7a = _0x2f75da; document['body'][_0x39dd7a(0x204)][_0x39dd7a(0x218)](_0x39dd7a(0x1fe)), mainContent[_0x39dd7a(0x204)]['add']('hidden'), sidebarElement[_0x39dd7a(0x204)][_0x39dd7a(0x218)]('hidden'); } function mostraElementiPrincipali() { const _0x1dce8b = _0x2f75da; document[_0x1dce8b(0x29f)][_0x1dce8b(0x204)][_0x1dce8b(0x29b)](_0x1dce8b(0x1fe)), mainContent[_0x1dce8b(0x204)][_0x1dce8b(0x29b)](_0x1dce8b(0x27c)), sidebarElement[_0x1dce8b(0x204)][_0x1dce8b(0x29b)](_0x1dce8b(0x27c)); } loginForm['addEventListener'](_0x2f75da(0x2b8), _0x213b52 => { const _0x27ccbb = _0x2f75da; _0x213b52[_0x27ccbb(0x245)](); const _0x304cd2 = document[_0x27ccbb(0x260)](_0x27ccbb(0x31c))[_0x27ccbb(0x2f7)], _0x2e8261 = document['getElementById'](_0x27ccbb(0x238))[_0x27ccbb(0x2f7)]; auth['signInWithEmailAndPassword'](_0x304cd2, _0x2e8261)[_0x27ccbb(0x23a)](_0x355965 => { const _0x47bdaa = _0x27ccbb; loginPage[_0x47bdaa(0x2a2)][_0x47bdaa(0x2fd)] = _0x47bdaa(0x2a4), mostraElementiPrincipali(), showSuccessToast(_0x47bdaa(0x2ca)), caricaDati()[_0x47bdaa(0x23a)](() => { const _0x13b679 = _0x47bdaa; inizializzaSincronizzazioneRealTime(), btnNuovoCliente[_0x13b679(0x252)](); }); })[_0x27ccbb(0x242)](_0x14ef93 => { const _0xf6593a = _0x27ccbb; showErrorToast('Credenziali\x20non\x20valide.\x20Riprova.'), console[_0xf6593a(0x206)](_0xf6593a(0x2c7), _0x14ef93); }); }), btnLogout['addEventListener'](_0x2f75da(0x252), () => { const _0x4adef8 = _0x2f75da; auth[_0x4adef8(0x329)]()['then'](() => { const _0x52c85b = _0x4adef8; nascondiElementiPrincipali(), loginPage[_0x52c85b(0x2a2)][_0x52c85b(0x2fd)] = _0x52c85b(0x33d), showSuccessToast(_0x52c85b(0x233)); })['catch'](_0x4c2c99 => { const _0x82901d = _0x4adef8; showErrorToast(_0x82901d(0x2f1) + _0x4c2c99); }); }), auth['onAuthStateChanged'](_0x39a1de => { const _0x5b5210 = _0x2f75da; _0x39a1de ? (loginPage[_0x5b5210(0x2a2)]['display'] = 'none', mostraElementiPrincipali()) : (nascondiElementiPrincipali(), loginPage[_0x5b5210(0x2a2)][_0x5b5210(0x2fd)] = _0x5b5210(0x33d)); }); function aggiornaContatori() { const _0x435685 = _0x2f75da; return db[_0x435685(0x207)](APP_ID + _0x435685(0x2d9))[_0x435685(0x214)](_0x435685(0x2f7))[_0x435685(0x23a)](_0x24e63c => { const _0x42937d = _0x435685, _0x30936f = _0x24e63c[_0x42937d(0x30e)]() || {}; function _0x3fafc9(_0x469b85) { const _0xa1648b = _0x42937d; return Array[_0xa1648b(0x256)](_0x469b85) ? _0x469b85[_0xa1648b(0x288)] : 0x0; } document[_0x42937d(0x260)](_0x42937d(0x1e8))[_0x42937d(0x248)] = _0x3fafc9(_0x30936f[_0x42937d(0x313)]), document[_0x42937d(0x260)](_0x42937d(0x255))[_0x42937d(0x248)] = _0x3fafc9(_0x30936f[_0x42937d(0x2b0)]), document[_0x42937d(0x260)](_0x42937d(0x2f4))[_0x42937d(0x248)] = _0x3fafc9(_0x30936f[_0x42937d(0x343)]), document[_0x42937d(0x260)](_0x42937d(0x2b5))[_0x42937d(0x248)] = _0x3fafc9(_0x30936f[_0x42937d(0x236)]), console['log']('Contatori\x20aggiornati:', { 'daPianificare': _0x3fafc9(_0x30936f[_0x42937d(0x313)]), 'inCorso': _0x3fafc9(_0x30936f[_0x42937d(0x2b0)]), 'completati': _0x3fafc9(_0x30936f[_0x42937d(0x343)]), 'cestino': _0x3fafc9(_0x30936f['cestino']) }); })[_0x435685(0x242)](_0x5beee5 => { const _0x44e740 = _0x435685; console[_0x44e740(0x206)](_0x44e740(0x31d), _0x5beee5); }); } function aggiornaContenuto() { const _0x17d976 = _0x2f75da; return caricaDati()[_0x17d976(0x23a)](() => { return aggiornaListaClientiDaPianificare(), aggiornaInterventiInCorso(), aggiornaInterventiCompletati(), aggiornaRubrica(), aggiornaListaNote(), aggiornaCalendario(), aggiornaContatori(); })['catch'](_0x4218a7 => { showErrorToast('Errore\x20nell\x27aggiornamento\x20dei\x20dati:\x20' + _0x4218a7); }); } function caricaDati() { const _0x4131f2 = _0x2f75da; return Promise[_0x4131f2(0x2fa)]([db[_0x4131f2(0x207)](APP_ID + _0x4131f2(0x2d9))[_0x4131f2(0x214)]('value'), db[_0x4131f2(0x207)](APP_ID + _0x4131f2(0x2bd))[_0x4131f2(0x214)](_0x4131f2(0x2f7))])['then'](([_0x9680f4, _0x54c3ec]) => { const _0x4b70e8 = _0x4131f2; console[_0x4b70e8(0x246)](_0x4b70e8(0x2c8), _0x9680f4[_0x4b70e8(0x30e)]()), console[_0x4b70e8(0x246)](_0x4b70e8(0x2e8), _0x54c3ec[_0x4b70e8(0x30e)]()); const _0x126a2b = _0x9680f4[_0x4b70e8(0x30e)]() || {}, _0x3e22c0 = _0x54c3ec[_0x4b70e8(0x30e)]() || []; function _0x3db76d(_0x42fa78, _0x573407, _0x292c20) { const _0x14a241 = _0x4b70e8; _0x42fa78[_0x14a241(0x290)] = '', Array[_0x14a241(0x256)](_0x573407) ? ((_0x292c20 === _0x14a241(0x2b0) || _0x292c20 === 'completati') && _0x573407[_0x14a241(0x336)]((_0x243d9d, _0x163a76) => { const _0x2a8f7f = _0x14a241, _0xdc96ef = new Date(_0x243d9d[_0x2a8f7f(0x31e)][_0x2a8f7f(0x21a)]('\x20')[0x0][_0x2a8f7f(0x21a)]('.')['reverse']()[_0x2a8f7f(0x1f9)]('-') + 'T' + (_0x243d9d['appuntamento'][_0x2a8f7f(0x21a)]('\x20')[0x1] || '00:00')), _0x2d8de3 = new Date(_0x163a76[_0x2a8f7f(0x31e)][_0x2a8f7f(0x21a)]('\x20')[0x0]['split']('.')[_0x2a8f7f(0x30c)]()['join']('-') + 'T' + (_0x163a76[_0x2a8f7f(0x31e)][_0x2a8f7f(0x21a)]('\x20')[0x1] || _0x2a8f7f(0x239))); return _0x2d8de3 - _0xdc96ef; }), _0x573407[_0x14a241(0x1f8)]((_0x1fc6dc, _0x14e24e) => { const _0x455598 = _0x14a241; if (_0x292c20 === _0x455598(0x343) && _0x14e24e >= 0x32) return; aggiungiRigaTabella(_0x42fa78, _0x1fc6dc, _0x292c20); })) : console['warn']('I\x20dati\x20per\x20' + _0x292c20 + _0x14a241(0x23d), _0x573407); } return _0x3db76d(tabellaClienti, _0x126a2b[_0x4b70e8(0x313)], _0x4b70e8(0x313)), _0x3db76d(tabellaInterventiInCorso, _0x126a2b[_0x4b70e8(0x2b0)], 'inCorso'), _0x3db76d(tabellaInterventiCompletati, _0x126a2b[_0x4b70e8(0x343)], _0x4b70e8(0x343)), _0x3db76d(tabellaCestino, _0x126a2b[_0x4b70e8(0x236)], _0x4b70e8(0x236)), tabellaRubrica['innerHTML'] = '', Array[_0x4b70e8(0x256)](_0x3e22c0) ? (_0x3e22c0[_0x4b70e8(0x336)]((_0x2482e6, _0x2a7e89) => _0x2482e6[_0x4b70e8(0x33a)][_0x4b70e8(0x1ff)](_0x2a7e89[_0x4b70e8(0x33a)])), _0x3e22c0['forEach'](_0x3780fe => aggiungiRigaRubrica(_0x3780fe))) : console['warn'](_0x4b70e8(0x26a), _0x3e22c0), aggiornaContatori(); })[_0x4131f2(0x242)](_0x3a6972 => { const _0xc6fbac = _0x4131f2; console[_0xc6fbac(0x206)](_0xc6fbac(0x21f), _0x3a6972), showErrorToast(_0xc6fbac(0x219) + _0x3a6972['message']); }); } function salvaDati() { const _0x2afaab = _0x2f75da, _0x11631a = { 'daPianificare': Array['from'](tabellaClienti['rows'])[_0x2afaab(0x2ab)](_0x422d4e => ({ 'cliente': _0x422d4e[_0x2afaab(0x305)][0x0][_0x2afaab(0x248)], 'indirizzo': _0x422d4e['cells'][0x1][_0x2afaab(0x248)], 'titolo': _0x422d4e[_0x2afaab(0x305)][0x2][_0x2afaab(0x248)], 'tipoIntervento': _0x422d4e[_0x2afaab(0x305)][0x3][_0x2afaab(0x248)], 'priorita': _0x422d4e['cells'][0x0][_0x2afaab(0x25f)](_0x2afaab(0x2ad))?.[_0x2afaab(0x2a2)][_0x2afaab(0x215)] || '' })), 'inCorso': Array[_0x2afaab(0x2be)](tabellaInterventiInCorso[_0x2afaab(0x212)])[_0x2afaab(0x2ab)](_0xd5a418 => ({ 'cliente': _0xd5a418[_0x2afaab(0x305)][0x0][_0x2afaab(0x248)], 'indirizzo': _0xd5a418['cells'][0x1][_0x2afaab(0x248)], 'titolo': _0xd5a418[_0x2afaab(0x305)][0x2]['textContent'], 'tipoIntervento': _0xd5a418[_0x2afaab(0x305)][0x3][_0x2afaab(0x248)], 'appuntamento': _0xd5a418[_0x2afaab(0x305)][0x4][_0x2afaab(0x248)], 'priorita': _0xd5a418[_0x2afaab(0x305)][0x0][_0x2afaab(0x25f)](_0x2afaab(0x2ad))?.[_0x2afaab(0x2a2)]['backgroundColor'] || '' })), 'completati': Array[_0x2afaab(0x2be)](tabellaInterventiCompletati[_0x2afaab(0x212)])[_0x2afaab(0x2ab)](_0x1f0a0b => ({ 'cliente': _0x1f0a0b[_0x2afaab(0x305)][0x0][_0x2afaab(0x248)], 'indirizzo': _0x1f0a0b[_0x2afaab(0x305)][0x1][_0x2afaab(0x248)], 'titolo': _0x1f0a0b[_0x2afaab(0x305)][0x2]['textContent'], 'tipoIntervento': _0x1f0a0b[_0x2afaab(0x305)][0x3][_0x2afaab(0x248)], 'appuntamento': _0x1f0a0b[_0x2afaab(0x305)][0x4][_0x2afaab(0x248)], 'priorita': _0x1f0a0b[_0x2afaab(0x305)][0x0][_0x2afaab(0x25f)](_0x2afaab(0x2ad))?.[_0x2afaab(0x2a2)][_0x2afaab(0x215)] || '', 'collaudoUrl': _0x1f0a0b['dataset']['collaudoUrl'] || '' })), 'cestino': Array[_0x2afaab(0x2be)](tabellaCestino['rows'])[_0x2afaab(0x2ab)](_0x3f43be => ({ 'cliente': _0x3f43be['cells'][0x0][_0x2afaab(0x248)], 'indirizzo': _0x3f43be[_0x2afaab(0x305)][0x1][_0x2afaab(0x248)], 'titolo': _0x3f43be['cells'][0x2][_0x2afaab(0x248)], 'tipoIntervento': _0x3f43be['cells'][0x3][_0x2afaab(0x248)], 'appuntamento': _0x3f43be[_0x2afaab(0x305)][0x4][_0x2afaab(0x248)], 'priorita': _0x3f43be[_0x2afaab(0x305)][0x0][_0x2afaab(0x25f)]('div')?.[_0x2afaab(0x2a2)]['backgroundColor'] || '' })) }, _0x40368e = Array['from'](tabellaRubrica[_0x2afaab(0x212)])[_0x2afaab(0x2ab)](_0x4fc7a3 => ({ 'cliente': _0x4fc7a3[_0x2afaab(0x305)][0x0][_0x2afaab(0x248)], 'indirizzo': _0x4fc7a3[_0x2afaab(0x305)][0x1][_0x2afaab(0x248)], 'titolo': _0x4fc7a3['cells'][0x2][_0x2afaab(0x248)], 'priorita': _0x4fc7a3[_0x2afaab(0x305)][0x0]['querySelector'](_0x2afaab(0x2ad))?.[_0x2afaab(0x2a2)]['backgroundColor'] || '' })); return Promise[_0x2afaab(0x2fa)]([db['ref'](APP_ID + _0x2afaab(0x2d9))[_0x2afaab(0x301)](_0x11631a), db['ref'](APP_ID + _0x2afaab(0x2bd))[_0x2afaab(0x301)](_0x40368e)])[_0x2afaab(0x23a)](() => { const _0x377a1a = _0x2afaab; return console['log'](_0x377a1a(0x278)), aggiornaContatori(); }); } function inizializzaSincronizzazioneRealTime() { const _0x465d82 = _0x2f75da; db[_0x465d82(0x207)](APP_ID + _0x465d82(0x2d9))['on']('value', _0xe4b330 => { const _0x3e3644 = _0x465d82; console['log'](_0x3e3644(0x23e), _0xe4b330[_0x3e3644(0x30e)]()), caricaDati()['then'](() => { aggiornaListaClientiDaPianificare(), aggiornaInterventiInCorso(), aggiornaInterventiCompletati(), aggiornaRubrica(), aggiornaCalendario(), aggiornaContatori(); }); }), db[_0x465d82(0x207)](APP_ID + _0x465d82(0x2bd))['on'](_0x465d82(0x2f7), _0x26e226 => { const _0x5edcfb = _0x465d82; console['log']('Dati\x20rubrica\x20aggiornati:', _0x26e226[_0x5edcfb(0x30e)]()), caricaDati()[_0x5edcfb(0x23a)](() => { aggiornaRubrica(); }); }); } btnNuovoCliente[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0x512bed = _0x2f75da; changeActiveButton(btnNuovoCliente), aggiornaContenuto()[_0x512bed(0x23a)](() => { const _0x4499d3 = _0x512bed; nuovoClienteForm[_0x4499d3(0x2a2)][_0x4499d3(0x2fd)] = _0x4499d3(0x33d), listaClienti['style'][_0x4499d3(0x2fd)] = _0x4499d3(0x2a4), interventiCompletati[_0x4499d3(0x2a2)][_0x4499d3(0x2fd)] = 'none', interventiInCorso[_0x4499d3(0x2a2)][_0x4499d3(0x2fd)] = _0x4499d3(0x2a4), rubrica[_0x4499d3(0x2a2)][_0x4499d3(0x2fd)] = _0x4499d3(0x2a4), cestino['style'][_0x4499d3(0x2fd)] = 'none', listaNote['style']['display'] = _0x4499d3(0x2a4), document[_0x4499d3(0x260)]('calendarioView')[_0x4499d3(0x2a2)][_0x4499d3(0x2fd)] = _0x4499d3(0x2a4); }); }), btnInterventi[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { changeActiveButton(btnInterventi), aggiornaContenuto()['then'](() => { const _0x4865ad = _0x3fcf; nuovoClienteForm[_0x4865ad(0x2a2)]['display'] = 'none', listaClienti[_0x4865ad(0x2a2)][_0x4865ad(0x2fd)] = _0x4865ad(0x33d), interventiCompletati[_0x4865ad(0x2a2)]['display'] = _0x4865ad(0x2a4), interventiInCorso[_0x4865ad(0x2a2)][_0x4865ad(0x2fd)] = _0x4865ad(0x2a4), rubrica['style'][_0x4865ad(0x2fd)] = _0x4865ad(0x2a4), cestino[_0x4865ad(0x2a2)][_0x4865ad(0x2fd)] = _0x4865ad(0x2a4), listaNote[_0x4865ad(0x2a2)][_0x4865ad(0x2fd)] = 'none', document[_0x4865ad(0x260)](_0x4865ad(0x1f0))[_0x4865ad(0x2a2)][_0x4865ad(0x2fd)] = _0x4865ad(0x2a4); }); }), btnInterventiInCorso['addEventListener'](_0x2f75da(0x252), () => { const _0x287e56 = _0x2f75da; changeActiveButton(btnInterventiInCorso), aggiornaContenuto()[_0x287e56(0x23a)](() => { const _0x1f2467 = _0x287e56; nuovoClienteForm[_0x1f2467(0x2a2)][_0x1f2467(0x2fd)] = _0x1f2467(0x2a4), listaClienti['style'][_0x1f2467(0x2fd)] = 'none', interventiCompletati['style']['display'] = _0x1f2467(0x2a4), interventiInCorso[_0x1f2467(0x2a2)]['display'] = _0x1f2467(0x33d), rubrica[_0x1f2467(0x2a2)][_0x1f2467(0x2fd)] = 'none', cestino[_0x1f2467(0x2a2)][_0x1f2467(0x2fd)] = _0x1f2467(0x2a4), listaNote[_0x1f2467(0x2a2)][_0x1f2467(0x2fd)] = _0x1f2467(0x2a4), document[_0x1f2467(0x260)](_0x1f2467(0x1f0))[_0x1f2467(0x2a2)]['display'] = _0x1f2467(0x2a4); }); }), btnInterventiCompletati[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0xd0944f = _0x2f75da; changeActiveButton(btnInterventiCompletati), aggiornaContenuto()[_0xd0944f(0x23a)](() => { const _0x54388b = _0xd0944f; nuovoClienteForm['style'][_0x54388b(0x2fd)] = _0x54388b(0x2a4), listaClienti[_0x54388b(0x2a2)][_0x54388b(0x2fd)] = 'none', interventiCompletati['style'][_0x54388b(0x2fd)] = _0x54388b(0x33d), interventiInCorso[_0x54388b(0x2a2)][_0x54388b(0x2fd)] = 'none', rubrica[_0x54388b(0x2a2)][_0x54388b(0x2fd)] = _0x54388b(0x2a4), cestino[_0x54388b(0x2a2)][_0x54388b(0x2fd)] = _0x54388b(0x2a4), listaNote[_0x54388b(0x2a2)][_0x54388b(0x2fd)] = _0x54388b(0x2a4), document['getElementById'](_0x54388b(0x1f0))['style'][_0x54388b(0x2fd)] = _0x54388b(0x2a4); }); }), btnRubrica['addEventListener'](_0x2f75da(0x252), () => { changeActiveButton(btnRubrica), aggiornaContenuto()['then'](() => { const _0x273d33 = _0x3fcf; nuovoClienteForm['style'][_0x273d33(0x2fd)] = _0x273d33(0x2a4), listaClienti[_0x273d33(0x2a2)][_0x273d33(0x2fd)] = _0x273d33(0x2a4), interventiCompletati[_0x273d33(0x2a2)][_0x273d33(0x2fd)] = _0x273d33(0x2a4), interventiInCorso['style'][_0x273d33(0x2fd)] = 'none', rubrica[_0x273d33(0x2a2)][_0x273d33(0x2fd)] = _0x273d33(0x33d), cestino[_0x273d33(0x2a2)]['display'] = _0x273d33(0x2a4), listaNote['style']['display'] = _0x273d33(0x2a4), document[_0x273d33(0x260)]('calendarioView')[_0x273d33(0x2a2)][_0x273d33(0x2fd)] = _0x273d33(0x2a4); }); }), btnCalendario['addEventListener'](_0x2f75da(0x252), () => { const _0x7fa05a = _0x2f75da; changeActiveButton(btnCalendario), aggiornaContenuto()[_0x7fa05a(0x23a)](() => { const _0x350a63 = _0x7fa05a; nuovoClienteForm[_0x350a63(0x2a2)][_0x350a63(0x2fd)] = _0x350a63(0x2a4), listaClienti[_0x350a63(0x2a2)][_0x350a63(0x2fd)] = _0x350a63(0x2a4), interventiCompletati[_0x350a63(0x2a2)][_0x350a63(0x2fd)] = 'none', interventiInCorso['style']['display'] = _0x350a63(0x2a4), rubrica[_0x350a63(0x2a2)][_0x350a63(0x2fd)] = _0x350a63(0x2a4), cestino['style']['display'] = _0x350a63(0x2a4), listaNote[_0x350a63(0x2a2)][_0x350a63(0x2fd)] = 'none', document['getElementById'](_0x350a63(0x1f0))[_0x350a63(0x2a2)]['display'] = 'block', mostraCalendario(); }); }), btnCestino[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0x59575e = _0x2f75da; changeActiveButton(btnCestino), aggiornaContenuto()[_0x59575e(0x23a)](() => { const _0xdcf950 = _0x59575e; nuovoClienteForm[_0xdcf950(0x2a2)][_0xdcf950(0x2fd)] = _0xdcf950(0x2a4), listaClienti[_0xdcf950(0x2a2)][_0xdcf950(0x2fd)] = 'none', interventiCompletati['style'][_0xdcf950(0x2fd)] = _0xdcf950(0x2a4), interventiInCorso[_0xdcf950(0x2a2)]['display'] = 'none', rubrica['style'][_0xdcf950(0x2fd)] = _0xdcf950(0x2a4), cestino[_0xdcf950(0x2a2)][_0xdcf950(0x2fd)] = 'block', listaNote['style'][_0xdcf950(0x2fd)] = _0xdcf950(0x2a4), document[_0xdcf950(0x260)]('calendarioView')[_0xdcf950(0x2a2)][_0xdcf950(0x2fd)] = _0xdcf950(0x2a4); }); }), btnNote['addEventListener'](_0x2f75da(0x252), () => { const _0x272da2 = _0x2f75da; changeActiveButton(btnNote), aggiornaContenuto()[_0x272da2(0x23a)](() => { const _0x229d60 = _0x272da2; nuovoClienteForm['style'][_0x229d60(0x2fd)] = _0x229d60(0x2a4), listaClienti[_0x229d60(0x2a2)][_0x229d60(0x2fd)] = 'none', interventiCompletati[_0x229d60(0x2a2)][_0x229d60(0x2fd)] = _0x229d60(0x2a4), interventiInCorso[_0x229d60(0x2a2)][_0x229d60(0x2fd)] = _0x229d60(0x2a4), rubrica['style'][_0x229d60(0x2fd)] = _0x229d60(0x2a4), cestino[_0x229d60(0x2a2)]['display'] = _0x229d60(0x2a4), listaNote[_0x229d60(0x2a2)][_0x229d60(0x2fd)] = _0x229d60(0x33d), document[_0x229d60(0x260)]('calendarioView')['style'][_0x229d60(0x2fd)] = _0x229d60(0x2a4), aggiornaListaNote(); }); }); function aggiungiRigaTabella(_0x5aac45, _0x56bac4, _0x491d71) { const _0x4be58a = _0x2f75da, _0x4df872 = _0x5aac45[_0x4be58a(0x272)](); _0x4df872['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Cliente\x22>' + _0x56bac4['cliente'] + '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Indirizzo\x22>' + _0x56bac4[_0x4be58a(0x25e)] + _0x4be58a(0x20d) + _0x56bac4[_0x4be58a(0x210)] + _0x4be58a(0x304) + _0x56bac4['tipoIntervento'] + _0x4be58a(0x1f3) + (_0x491d71 !== 'daPianificare' ? _0x4be58a(0x1f7) + (_0x56bac4[_0x4be58a(0x31e)] || '') + '</td>' : '') + _0x4be58a(0x265) + (_0x491d71 === _0x4be58a(0x313) ? _0x4be58a(0x27d) : '') + _0x4be58a(0x2a7) + (_0x491d71 === _0x4be58a(0x313) ? _0x4be58a(0x2b3) : '') + _0x4be58a(0x2a7) + (_0x491d71 === _0x4be58a(0x2b0) ? '<button\x20onclick=\x22apriModalCollaudo(this)\x22\x20class=\x22btn-collaudo\x22>Collaudo</button>' : '') + _0x4be58a(0x2a7) + (_0x491d71 === _0x4be58a(0x343) ? _0x4be58a(0x244) : '') + _0x4be58a(0x2a7) + (_0x491d71 === _0x4be58a(0x313) || _0x491d71 === _0x4be58a(0x2b0) ? '<button\x20onclick=\x22eliminaIntervento(this)\x22\x20class=\x22btn-elimina\x22><i\x20class=\x22fas\x20fa-trash-alt\x22></i></button>' : '') + _0x4be58a(0x2a7) + (_0x491d71 === 'cestino' ? _0x4be58a(0x277) : '') + _0x4be58a(0x2a7) + (_0x491d71 === _0x4be58a(0x236) ? _0x4be58a(0x30d) : '') + _0x4be58a(0x316); _0x56bac4[_0x4be58a(0x307)] && (_0x4df872['dataset'][_0x4be58a(0x307)] = _0x56bac4['collaudoUrl']); if (_0x56bac4[_0x4be58a(0x24a)]) { const _0x36d167 = document['createElement']('div'); _0x36d167[_0x4be58a(0x2a2)][_0x4be58a(0x2c3)] = '10px', _0x36d167[_0x4be58a(0x2a2)]['height'] = '10px', _0x36d167[_0x4be58a(0x2a2)][_0x4be58a(0x2a3)] = '50%', _0x36d167[_0x4be58a(0x2a2)][_0x4be58a(0x215)] = _0x56bac4['priorita'], _0x36d167[_0x4be58a(0x2a2)]['display'] = _0x4be58a(0x323), _0x36d167[_0x4be58a(0x2a2)]['marginRight'] = _0x4be58a(0x33e), _0x4df872[_0x4be58a(0x305)][0x0][_0x4be58a(0x320)](_0x36d167, _0x4df872[_0x4be58a(0x305)][0x0]['firstChild']); } } function aggiungiRigaRubrica(_0x566d3c) { const _0x40f855 = _0x2f75da, _0x340dac = tabellaRubrica[_0x40f855(0x272)](); _0x340dac[_0x40f855(0x290)] = _0x40f855(0x2e2) + _0x566d3c['cliente'] + _0x40f855(0x280) + _0x566d3c['indirizzo'] + '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Titolo\x22>' + _0x566d3c[_0x40f855(0x210)] + '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Azioni\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22azioni-intervento\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22apriModalModifica(this)\x22\x20class=\x22btn-modifica\x22><i\x20class=\x22fas\x20fa-pencil-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pianificaInterventoRubrica(this)\x22\x20class=\x22btn-pianifica\x22><i\x20class=\x22fas\x20fa-calendar-plus\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22eliminaContattoRubrica(this)\x22\x20class=\x22btn-elimina\x22><i\x20class=\x22fas\x20fa-trash-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20'; if (_0x566d3c[_0x40f855(0x24a)]) { const _0x55224f = document['createElement'](_0x40f855(0x2ad)); _0x55224f[_0x40f855(0x2a2)][_0x40f855(0x2c3)] = _0x40f855(0x24e), _0x55224f['style'][_0x40f855(0x205)] = _0x40f855(0x24e), _0x55224f[_0x40f855(0x2a2)][_0x40f855(0x2a3)] = '50%', _0x55224f[_0x40f855(0x2a2)]['backgroundColor'] = _0x566d3c[_0x40f855(0x24a)], _0x55224f[_0x40f855(0x2a2)][_0x40f855(0x2fd)] = _0x40f855(0x323), _0x55224f['style'][_0x40f855(0x2ac)] = _0x40f855(0x33e), _0x340dac[_0x40f855(0x305)][0x0][_0x40f855(0x320)](_0x55224f, _0x340dac[_0x40f855(0x305)][0x0][_0x40f855(0x20c)]); } } interventoForm[_0x2f75da(0x2e1)](_0x2f75da(0x2b8), _0x15db91 => { const _0x3da61b = _0x2f75da; _0x15db91[_0x3da61b(0x245)](); const _0x55608d = { 'cliente': document[_0x3da61b(0x260)](_0x3da61b(0x33a))[_0x3da61b(0x2f7)] || _0x3da61b(0x335), 'indirizzo': document[_0x3da61b(0x260)](_0x3da61b(0x25e))[_0x3da61b(0x2f7)] || _0x3da61b(0x335), 'titolo': document[_0x3da61b(0x260)]('titolo')[_0x3da61b(0x2f7)] || _0x3da61b(0x335), 'tipoIntervento': document[_0x3da61b(0x260)](_0x3da61b(0x2af))[_0x3da61b(0x2f7)] || 'N/D', 'priorita': document[_0x3da61b(0x260)]('priorita')[_0x3da61b(0x2f7)] }; aggiungiRigaTabella(tabellaClienti, _0x55608d, _0x3da61b(0x313)), aggiungiRigaRubrica(_0x55608d), interventoForm[_0x3da61b(0x222)](), salvaDati()[_0x3da61b(0x23a)](() => showSuccessToast('Nuovo\x20cliente\x20aggiunto\x20e\x20salvato\x20con\x20successo!'))[_0x3da61b(0x242)](_0x4ffa4b => showErrorToast(_0x3da61b(0x2dc) + _0x4ffa4b)); }); function pianificaAppuntamento(_0x494df9) { const _0x2f5ee0 = _0x2f75da; clienteSelezionato = _0x494df9[_0x2f5ee0(0x33f)]('tr'), document[_0x2f5ee0(0x260)](_0x2f5ee0(0x26b))[_0x2f5ee0(0x2a2)][_0x2f5ee0(0x2fd)] = _0x2f5ee0(0x33d); } formAppuntamento[_0x2f75da(0x2e1)]('submit', _0xec14e4 => { const _0x4149a2 = _0x2f75da; _0xec14e4[_0x4149a2(0x245)](); const _0x5e0c2b = document['getElementById']('dataAppuntamento')[_0x4149a2(0x2f7)], _0x5838ac = document[_0x4149a2(0x260)](_0x4149a2(0x200))['value'], [_0x19df3a, _0x3ad87f, _0x2ba5c3] = _0x5e0c2b[_0x4149a2(0x21a)]('-'), _0x5b5247 = new Date(_0x19df3a, _0x3ad87f - 0x1, _0x2ba5c3), _0x4d0ec4 = formatDataItaliana(_0x5b5247), _0x5c6acb = _0x5838ac ? _0x5838ac[_0x4149a2(0x297)](0x0, 0x5) : _0x4149a2(0x335), _0x2c569d = _0x4d0ec4 + '\x20' + _0x5c6acb, _0x2c5661 = { 'cliente': clienteSelezionato[_0x4149a2(0x305)][0x0][_0x4149a2(0x248)], 'indirizzo': clienteSelezionato[_0x4149a2(0x305)][0x1][_0x4149a2(0x248)], 'titolo': clienteSelezionato[_0x4149a2(0x305)][0x2][_0x4149a2(0x248)], 'tipoIntervento': clienteSelezionato[_0x4149a2(0x305)][0x3][_0x4149a2(0x248)], 'appuntamento': _0x2c569d, 'priorita': clienteSelezionato[_0x4149a2(0x305)][0x0][_0x4149a2(0x25f)](_0x4149a2(0x2ad))?.[_0x4149a2(0x2a2)][_0x4149a2(0x215)] || '' }; aggiungiRigaTabella(tabellaInterventiInCorso, _0x2c5661, _0x4149a2(0x2b0)), clienteSelezionato[_0x4149a2(0x29b)](), document[_0x4149a2(0x260)]('modalAppuntamento')['style'][_0x4149a2(0x2fd)] = 'none', formAppuntamento[_0x4149a2(0x222)](), salvaDati()[_0x4149a2(0x23a)](() => showSuccessToast('Appuntamento\x20pianificato\x20e\x20salvato\x20con\x20successo!'))[_0x4149a2(0x242)](_0xa38683 => showErrorToast('Errore\x20nel\x20salvataggio\x20dell\x27appuntamento:\x20' + _0xa38683)); }); function apriModalCollaudo(_0xb2534f) { const _0x4c4679 = _0x2f75da; clienteSelezionato = _0xb2534f[_0x4c4679(0x33f)]('tr'), modalCollaudo[_0x4c4679(0x2a2)][_0x4c4679(0x2fd)] = _0x4c4679(0x33d), document[_0x4c4679(0x260)](_0x4c4679(0x240))[_0x4c4679(0x275)] = new Date(), document[_0x4c4679(0x260)](_0x4c4679(0x314))['value'] = clienteSelezionato[_0x4c4679(0x305)][0x1]['textContent']; } collaudoForm[_0x2f75da(0x2e1)]('submit', _0x2bb016 => { const _0x514713 = _0x2f75da; _0x2bb016[_0x514713(0x245)](), generaDocumentoCollaudo(); }), document['getElementById']('chiudiCollaudo')['addEventListener']('click', function () { const _0x37b869 = _0x2f75da; document[_0x37b869(0x260)](_0x37b869(0x243))[_0x37b869(0x2a2)]['display'] = 'none'; }); function generaDocumentoCollaudo() { const _0x191ee1 = _0x2f75da, _0x37fdd8 = document[_0x191ee1(0x260)](_0x191ee1(0x240))[_0x191ee1(0x2f7)], _0x21d16a = document['getElementById'](_0x191ee1(0x314))[_0x191ee1(0x2f7)], _0x58a6f2 = document[_0x191ee1(0x260)](_0x191ee1(0x2bc))[_0x191ee1(0x2f7)], _0x3a9905 = document['getElementById'](_0x191ee1(0x2b1))[_0x191ee1(0x2f7)], _0x5c53fd = document['getElementById'](_0x191ee1(0x20a))[_0x191ee1(0x2f7)], _0x2885d8 = document[_0x191ee1(0x260)](_0x191ee1(0x344))[_0x191ee1(0x2f7)], _0x45ac2c = document[_0x191ee1(0x260)](_0x191ee1(0x2ea))[_0x191ee1(0x2f7)]; let _0x452134 = _0x5c53fd; _0x5c53fd === _0x191ee1(0x259) && _0x2885d8 && (_0x452134 += _0x191ee1(0x1f1) + _0x2885d8); modalCollaudo[_0x191ee1(0x2a2)][_0x191ee1(0x2fd)] = 'none', modalFirmaCollaudo[_0x191ee1(0x2a2)]['display'] = _0x191ee1(0x33d); const _0x1fdaa6 = areaFirmaCollaudo['getContext']('2d'); areaFirmaCollaudo[_0x191ee1(0x2c3)] = areaFirmaCollaudo[_0x191ee1(0x201)], areaFirmaCollaudo[_0x191ee1(0x205)] = areaFirmaCollaudo['offsetHeight'], _0x1fdaa6[_0x191ee1(0x338)] = _0x191ee1(0x311), _0x1fdaa6['fillRect'](0x0, 0x0, areaFirmaCollaudo[_0x191ee1(0x2c3)], areaFirmaCollaudo[_0x191ee1(0x205)]), _0x1fdaa6[_0x191ee1(0x345)] = _0x191ee1(0x1f6), _0x1fdaa6[_0x191ee1(0x315)] = 0x2, _0x1fdaa6[_0x191ee1(0x2a6)] = _0x191ee1(0x309); let _0x1e13f6 = ![]; areaFirmaCollaudo['addEventListener'](_0x191ee1(0x333), _0x3533b1), areaFirmaCollaudo['addEventListener'](_0x191ee1(0x26c), _0x265cd5), areaFirmaCollaudo['addEventListener'](_0x191ee1(0x28d), _0x1496a0), areaFirmaCollaudo[_0x191ee1(0x2e1)](_0x191ee1(0x20b), _0x1496a0), areaFirmaCollaudo[_0x191ee1(0x2e1)](_0x191ee1(0x211), _0x5164ef), areaFirmaCollaudo[_0x191ee1(0x2e1)]('touchmove', _0x476dc1), areaFirmaCollaudo[_0x191ee1(0x2e1)](_0x191ee1(0x1fc), _0x2504c1); function _0x5164ef(_0x34750f) { const _0x5c447b = _0x191ee1; _0x34750f[_0x5c447b(0x245)](); const _0x1ac1fe = _0x34750f[_0x5c447b(0x2e9)][0x0]; _0x3533b1({ 'clientX': _0x1ac1fe[_0x5c447b(0x2e6)], 'clientY': _0x1ac1fe['clientY'] }); } function _0x476dc1(_0x16df9f) { const _0x4da5cf = _0x191ee1; _0x16df9f[_0x4da5cf(0x245)](); const _0x4fd4d9 = _0x16df9f[_0x4da5cf(0x2e9)][0x0]; _0x265cd5({ 'clientX': _0x4fd4d9[_0x4da5cf(0x2e6)], 'clientY': _0x4fd4d9[_0x4da5cf(0x321)] }); } function _0x2504c1(_0xb09a9a) { _0xb09a9a['preventDefault'](), _0x1496a0(); } function _0x3533b1(_0x39abe9) { _0x1e13f6 = !![], _0x265cd5(_0x39abe9); } function _0x265cd5(_0x34094a) { const _0x58b6d1 = _0x191ee1; if (!_0x1e13f6) return; const _0x28ac57 = areaFirmaCollaudo[_0x58b6d1(0x1eb)](), _0x1defe3 = _0x34094a[_0x58b6d1(0x2e6)] - _0x28ac57[_0x58b6d1(0x2b2)], _0x5dae5d = _0x34094a['clientY'] - _0x28ac57[_0x58b6d1(0x2d7)]; _0x1fdaa6[_0x58b6d1(0x209)](_0x1defe3, _0x5dae5d), _0x1fdaa6[_0x58b6d1(0x330)](), _0x1fdaa6[_0x58b6d1(0x27b)](), _0x1fdaa6[_0x58b6d1(0x30f)](_0x1defe3, _0x5dae5d); } function _0x1496a0() { const _0x130a13 = _0x191ee1; _0x1e13f6 = ![], _0x1fdaa6[_0x130a13(0x27b)](); } window[_0x191ee1(0x286)] = { 'cliente': clienteSelezionato[_0x191ee1(0x305)][0x0][_0x191ee1(0x248)], 'data': _0x37fdd8, 'indirizzo': _0x21d16a, 'capCittaProvincia': _0x58a6f2, 'nomeRappresentante': _0x3a9905, 'ruoloText': _0x452134, 'oggettoIntervento': _0x45ac2c }; } confermaFirmaCollaudo[_0x2f75da(0x2e1)]('click', function () { const _0x332d57 = _0x2f75da; console[_0x332d57(0x246)](_0x332d57(0x264)); const _0x4568ce = document[_0x332d57(0x260)](_0x332d57(0x2db)), _0x36427b = _0x4568ce[_0x332d57(0x2de)]('2d'), _0x2dd4f1 = _0x36427b[_0x332d57(0x29e)](0x0, 0x0, _0x4568ce['width'], _0x4568ce[_0x332d57(0x205)])[_0x332d57(0x306)][_0x332d57(0x2f8)](_0x1fce48 => _0x1fce48 === 0x0 || _0x1fce48 === 0xff); if (_0x2dd4f1) { showErrorToast('Per\x20favore,\x20firma\x20prima\x20di\x20continuare.'); return; } const _0x32fbbc = _0x332d57(0x319), _0x1092e8 = _0x332d57(0x2d2), _0xfc7eec = _0x332d57(0x21c), _0x3e412f = _0x4568ce[_0x332d57(0x299)]('image/png'), _0x4026e2 = new jsPDF(), _0x126dc4 = window[_0x332d57(0x286)]; function _0xdbd3f0(_0x4d4729, _0x338e04, _0x528a56, _0x238d94, _0xeb5b7f, _0x99a9cf = {}) { const _0x5bbe4c = _0x332d57; _0x4026e2[_0x5bbe4c(0x2bb)](_0x99a9cf['font'] || _0x5bbe4c(0x241), _0x99a9cf['fontStyle'] || _0x5bbe4c(0x251)), _0x4026e2[_0x5bbe4c(0x2f9)](_0x99a9cf[_0x5bbe4c(0x216)] || 0xc); if (_0x99a9cf[_0x5bbe4c(0x2f3)]) _0x4026e2[_0x5bbe4c(0x2f0)](_0x99a9cf[_0x5bbe4c(0x2f3)]); const _0xf1af19 = _0x4026e2[_0x5bbe4c(0x293)](_0x4d4729, _0x238d94); for (let _0x2f7dc9 = 0x0; _0x2f7dc9 < _0xf1af19['length']; _0x2f7dc9++) { _0x4026e2[_0x5bbe4c(0x26f)](_0xf1af19[_0x2f7dc9], _0x338e04, _0x528a56 + _0x2f7dc9 * _0xeb5b7f); } return _0xf1af19[_0x5bbe4c(0x288)] * _0xeb5b7f; } function _0x30bb8d(_0xfc2bbe) { return new Promise((_0xabe07c, _0x4efa25) => { const _0x1dfc1f = _0x3fcf, _0x366720 = new Image(); _0x366720[_0x1dfc1f(0x26d)] = _0x1dfc1f(0x2c6), _0x366720[_0x1dfc1f(0x27f)] = () => _0xabe07c(_0x366720), _0x366720[_0x1dfc1f(0x29d)] = _0x5b104a => { const _0x215969 = _0x1dfc1f; console['error'](_0x215969(0x1f4) + _0xfc2bbe, _0x5b104a), _0x4efa25(new Error(_0x215969(0x24b) + _0xfc2bbe)); }, _0x366720['src'] = _0xfc2bbe; }); } Promise[_0x332d57(0x2fa)]([_0x30bb8d(_0x32fbbc)['catch'](() => null), _0x30bb8d(_0x1092e8)[_0x332d57(0x242)](() => null), _0x30bb8d(_0xfc7eec)[_0x332d57(0x242)](() => null)])[_0x332d57(0x23a)](([_0x1273a4, _0x2f6f0b, _0x54bbe2]) => { const _0x2ead96 = _0x332d57; if (_0x1273a4) _0x4026e2['addImage'](_0x1273a4, _0x2ead96(0x29c), 0x5, 0xa, 0x32, 0x28); if (_0x2f6f0b) _0x4026e2[_0x2ead96(0x1e9)](_0x2f6f0b, _0x2ead96(0x271), 0x96, 0xa, 0x32, 0x28); _0x4026e2[_0x2ead96(0x2bb)](_0x2ead96(0x241), _0x2ead96(0x2ce)), _0x4026e2['setFontSize'](0x12), _0x4026e2[_0x2ead96(0x2f0)](0x0), _0x4026e2[_0x2ead96(0x26f)](_0x2ead96(0x337), 0x69, 0x28, null, null, _0x2ead96(0x2bf)), _0x4026e2[_0x2ead96(0x2f0)](0x0), _0x4026e2[_0x2ead96(0x2f9)](0xc); let _0x4ff024 = 0x3c; function _0x2e3fb8(_0x1aadb7) { const _0x3a2bb3 = _0x2ead96, _0xc7e237 = new Date(_0x1aadb7), _0x60f116 = _0xc7e237[_0x3a2bb3(0x25c)]()[_0x3a2bb3(0x227)]()[_0x3a2bb3(0x1ed)](0x2, '0'), _0x594255 = (_0xc7e237[_0x3a2bb3(0x281)]() + 0x1)['toString']()['padStart'](0x2, '0'), _0x704c5c = _0xc7e237['getFullYear'](); return _0x60f116 + '.' + _0x594255 + '.' + _0x704c5c; } _0x4ff024 += _0xdbd3f0(_0x2ead96(0x213) + _0x126dc4[_0x2ead96(0x33a)], 0xa, _0x4ff024, 0xbe, 0x7, { 'font': _0x2ead96(0x241), 'fontStyle': _0x2ead96(0x2ce) }), _0x4ff024 += _0xdbd3f0(_0x2ead96(0x2a9) + _0x2e3fb8(_0x126dc4[_0x2ead96(0x306)]), 0xa, _0x4ff024, 0xbe, 0x7, { 'font': _0x2ead96(0x241), 'fontStyle': 'italic' }), _0x4ff024 += _0xdbd3f0('Indirizzo:\x20' + _0x126dc4[_0x2ead96(0x25e)], 0xa, _0x4ff024, 0xbe, 0x7), _0x4ff024 += _0xdbd3f0(_0x2ead96(0x328) + _0x126dc4[_0x2ead96(0x340)], 0xa, _0x4ff024, 0xbe, 0x7), _0x4ff024 += 0xa, _0x4ff024 += _0xdbd3f0(_0x2ead96(0x1f5), 0xa, _0x4ff024, 0xbe, 0x7, { 'font': _0x2ead96(0x241), 'fontStyle': 'bold', 'fontSize': 0xe }), _0x4ff024 += _0xdbd3f0(_0x2ead96(0x231) + _0x126dc4[_0x2ead96(0x2b1)], 0xa, _0x4ff024, 0xbe, 0x7), _0x4ff024 += _0xdbd3f0(_0x2ead96(0x2e4) + _0x126dc4[_0x2ead96(0x2fc)], 0xa, _0x4ff024, 0xbe, 0x7, { 'font': 'helvetica', 'fontStyle': _0x2ead96(0x2d5) }), _0x4ff024 += 0xa, _0x4ff024 += _0xdbd3f0(_0x2ead96(0x22e), 0xa, _0x4ff024, 0xbe, 0x7, { 'font': _0x2ead96(0x241), 'fontStyle': 'bold', 'fontSize': 0xe }), _0x4ff024 += _0xdbd3f0(_0x126dc4['oggettoIntervento'], 0xa, _0x4ff024, 0xbe, 0x7), _0x4ff024 += 0xa, _0x4ff024 += _0xdbd3f0(_0x2ead96(0x2c0), 0xa, _0x4ff024, 0xbe, 0x7, { 'font': _0x2ead96(0x241), 'fontStyle': _0x2ead96(0x2ce), 'fontSize': 0xe }), _0x4ff024 += _0xdbd3f0('Il\x20sottoscritto,\x20le\x20cui\x20generalità\x20sono\x20sopra\x20indicate,\x20unitamente\x20al\x20tecnico\x20responsabile\x20della\x20ditta\x20Alin\x20System,\x20attesta\x20che\x20in\x20data\x20odierna\x20è\x20stato\x20eseguito\x20il\x20collaudo\x20finale\x20degli\x20interventi\x20elettrici\x20descritti.', 0xa, _0x4ff024, 0xbe, 0x7), _0x4ff024 += 0xa, _0x4ff024 += _0xdbd3f0('Si\x20certifica\x20che\x20il\x20collaudo\x20ha\x20dato\x20esito\x20positivo,\x20dimostrando\x20che\x20i\x20lavori\x20sono\x20stati\x20eseguiti\x20conformemente\x20alle\x20specifiche\x20concordate\x20e\x20soddisfano\x20pienamente\x20le\x20necessità\x20richieste.', 0xa, _0x4ff024, 0xbe, 0x7, { 'font': _0x2ead96(0x241), 'fontStyle': _0x2ead96(0x2d5) }), _0x4ff024 += 0xa, _0x4ff024 += _0xdbd3f0(_0x2ead96(0x31a), 0xa, _0x4ff024, 0xbe, 0x7); let _0x32eda6 = _0x4026e2[_0x2ead96(0x2fb)]['pageSize'][_0x2ead96(0x205)] - 0x28; _0x4026e2[_0x2ead96(0x26f)](_0x2ead96(0x287), 0xa, _0x32eda6), _0x4026e2['addImage'](_0x3e412f, _0x2ead96(0x29c), 0xa, _0x32eda6 + 0x5, 0x32, 0x19), _0x4026e2[_0x2ead96(0x26f)](_0x2ead96(0x308), 0x87, _0x32eda6); if (_0x54bbe2) _0x4026e2[_0x2ead96(0x1e9)](_0x54bbe2, _0x2ead96(0x271), 0x87, _0x32eda6 + 0x5, 0x32, 0x19); const _0x56a839 = _0x4026e2['output'](_0x2ead96(0x22d)), _0x4c535a = _0x2ead96(0x32a) + _0x126dc4[_0x2ead96(0x33a)] + '_' + _0x2e3fb8(new Date()) + '.pdf', _0x40aea4 = storage['ref']()[_0x2ead96(0x2c5)](_0x4c535a); _0x40aea4['put'](_0x56a839)[_0x2ead96(0x23a)](_0x171cef => { const _0x15a4d9 = _0x2ead96; return console[_0x15a4d9(0x246)](_0x15a4d9(0x23f)), _0x171cef[_0x15a4d9(0x207)][_0x15a4d9(0x2df)](); })[_0x2ead96(0x23a)](_0x2492ed => { const _0x500268 = _0x2ead96; console[_0x500268(0x246)]('URL\x20di\x20download\x20ottenuto:', _0x2492ed); const _0xf6ef89 = { 'cliente': clienteSelezionato[_0x500268(0x305)][0x0][_0x500268(0x248)], 'indirizzo': clienteSelezionato[_0x500268(0x305)][0x1]['textContent'], 'titolo': clienteSelezionato['cells'][0x2][_0x500268(0x248)], 'tipoIntervento': clienteSelezionato[_0x500268(0x305)][0x3][_0x500268(0x248)], 'appuntamento': clienteSelezionato[_0x500268(0x305)][0x4]['textContent'], 'priorita': clienteSelezionato[_0x500268(0x305)][0x0]['querySelector'](_0x500268(0x2ad))?.['style'][_0x500268(0x215)] || '', 'collaudoUrl': _0x2492ed }; return aggiungiRigaTabella(tabellaInterventiCompletati, _0xf6ef89, 'completati'), clienteSelezionato[_0x500268(0x29b)](), salvaDati(); })[_0x2ead96(0x23a)](() => { const _0x19b6b7 = _0x2ead96; showSuccessToast('Intervento\x20completato\x20e\x20documento\x20di\x20collaudo\x20salvato\x20con\x20successo!'), modalFirmaCollaudo[_0x19b6b7(0x2a2)][_0x19b6b7(0x2fd)] = 'none'; })[_0x2ead96(0x242)](_0x42c990 => { const _0x2c7e56 = _0x2ead96; console['error'](_0x2c7e56(0x303), _0x42c990), showErrorToast(_0x2c7e56(0x27e) + _0x42c990['message']); }); })[_0x332d57(0x242)](_0x1747dc => { const _0x978f82 = _0x332d57; console[_0x978f82(0x206)](_0x978f82(0x312), _0x1747dc), showErrorToast('Errore\x20nel\x20caricamento\x20delle\x20immagini.\x20Il\x20PDF\x20potrebbe\x20non\x20includere\x20tutte\x20le\x20immagini.'); }); }); function visualizzaCollaudo(_0x227bb0) { const _0x75c90e = _0x2f75da, _0x2b5932 = _0x227bb0['closest']('tr'), _0xdfc7a2 = _0x2b5932[_0x75c90e(0x341)][_0x75c90e(0x307)]; _0xdfc7a2 ? window[_0x75c90e(0x33b)](_0xdfc7a2, _0x75c90e(0x2b7)) : showErrorToast(_0x75c90e(0x32c)); } function eliminaIntervento(_0x3e4d10) { const _0x5cd0c8 = _0x2f75da; if (confirm(_0x5cd0c8(0x25a))) { const _0x2eaebe = _0x3e4d10[_0x5cd0c8(0x33f)]('tr'), _0x23e5e8 = { 'cliente': _0x2eaebe[_0x5cd0c8(0x305)][0x0][_0x5cd0c8(0x248)], 'indirizzo': _0x2eaebe[_0x5cd0c8(0x305)][0x1][_0x5cd0c8(0x248)], 'titolo': _0x2eaebe['cells'][0x2][_0x5cd0c8(0x248)], 'tipoIntervento': _0x2eaebe[_0x5cd0c8(0x305)][0x3]['textContent'], 'appuntamento': _0x2eaebe[_0x5cd0c8(0x305)][0x4] ? _0x2eaebe[_0x5cd0c8(0x305)][0x4][_0x5cd0c8(0x248)] : '', 'priorita': _0x2eaebe[_0x5cd0c8(0x305)][0x0][_0x5cd0c8(0x25f)](_0x5cd0c8(0x2ad))?.[_0x5cd0c8(0x2a2)][_0x5cd0c8(0x215)] || '' }; aggiungiRigaTabella(tabellaCestino, _0x23e5e8, _0x5cd0c8(0x236)), _0x2eaebe[_0x5cd0c8(0x29b)](), salvaDati()['then'](() => showSuccessToast('Intervento\x20spostato\x20nel\x20cestino'))[_0x5cd0c8(0x242)](_0xb14e09 => showErrorToast('Errore\x20nello\x20spostamento\x20dell\x27intervento\x20nel\x20cestino:\x20' + _0xb14e09)); } } function ripristinaIntervento(_0x89d1d) { const _0x2489c9 = _0x2f75da, _0x471205 = _0x89d1d['closest']('tr'), _0x144b88 = { 'cliente': _0x471205[_0x2489c9(0x305)][0x0][_0x2489c9(0x248)], 'indirizzo': _0x471205['cells'][0x1][_0x2489c9(0x248)], 'titolo': _0x471205[_0x2489c9(0x305)][0x2][_0x2489c9(0x248)], 'tipoIntervento': _0x471205[_0x2489c9(0x305)][0x3]['textContent'], 'priorita': _0x471205[_0x2489c9(0x305)][0x0][_0x2489c9(0x25f)](_0x2489c9(0x2ad))?.[_0x2489c9(0x2a2)][_0x2489c9(0x215)] || '' }; _0x144b88['tipoIntervento'] === _0x2489c9(0x279) ? aggiungiRigaRubrica(_0x144b88) : aggiungiRigaTabella(tabellaClienti, _0x144b88, 'daPianificare'), _0x471205['remove'](), salvaDati()['then'](() => showSuccessToast(_0x144b88[_0x2489c9(0x2af)] === 'Contatto\x20Rubrica' ? 'Contatto\x20ripristinato\x20nella\x20rubrica' : _0x2489c9(0x223)))['catch'](_0x3593e3 => showErrorToast('Errore\x20nel\x20ripristino:\x20' + _0x3593e3)); } function eliminaDefinitivamente(_0x497425) { const _0x9ee1dd = _0x2f75da; if (confirm('Sei\x20sicuro\x20di\x20voler\x20eliminare\x20definitivamente\x20questo\x20intervento?')) { const _0x209058 = _0x497425[_0x9ee1dd(0x33f)]('tr'); _0x209058['remove'](), salvaDati()['then'](() => showSuccessToast(_0x9ee1dd(0x208)))[_0x9ee1dd(0x242)](_0x40303d => showErrorToast(_0x9ee1dd(0x2b4) + _0x40303d)); } } function _0x5a77() { const _0x3d373b = ['Errore\x20durante\x20il\x20processo:', '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Tipo\x20Intervento\x22>', 'cells', 'data', 'collaudoUrl', 'Firma\x20del\x20Tecnico\x20AlinSystem:', 'round', 'Nota\x20eliminata', 'push', 'reverse', '<button\x20onclick=\x22eliminaDefinitivamente(this)\x22\x20class=\x22btn-elimina\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button>', 'val', 'moveTo', '228406714979', 'white', 'Errore\x20nel\x20caricamento\x20delle\x20immagini:', 'daPianificare', 'indirizzoCliente', 'lineWidth', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20', '.sidebar', 'show\x20', 'https://i.imgur.com/9lxevm7.png', 'Il\x20sottoscritto\x20dichiara\x20di\x20accettare\x20il\x20completamento\x20e\x20l\x27esecuzione\x20dei\x20lavori\x20eseguiti\x20da\x20Alin\x20System\x20e\x20conferma\x20che,\x20a\x20seguito\x20di\x20questo\x20collaudo,\x20non\x20vi\x20sono\x20ulteriori\x20pretese\x20o\x20reclami\x20nei\x20confronti\x20della\x20ditta.\x20Si\x20precisa,\x20inoltre,\x20che\x20tutto\x20il\x20materiale\x20fornito\x20è\x20coperto\x20da\x20una\x20garanzia\x20di\x202\x20anni.\x20Oltre\x20a\x20quanto\x20specificato,\x20non\x20vi\x20sono\x20altre\x20pretese\x20o\x20reclami.', 'annullaNota', 'email', 'Errore\x20nell\x27aggiornamento\x20dei\x20contatori:', 'appuntamento', 'modal', 'insertBefore', 'clientY', 'G-JHDQCENQGB', 'inline-block', 'btnNuovoCliente', 'appendChild', 'confermaFirmaCollaudo', 'tagName', 'CAP|Città|Provincia:\x20', 'signOut', 'collaudo_', 'nextMonth', 'URL\x20del\x20documento\x20di\x20collaudo\x20non\x20trovato\x20per\x20questo\x20intervento.', 'Errore\x20nell\x27aggiunta\x20dell\x27intervento\x20da\x20pianificare:\x20', 'modTipoIntervento', 'collaudoForm', 'stroke', 'elencoNote', 'selected', 'mousedown', 'BUTTON', 'N/D', 'sort', 'ATTESTAZIONE\x20DI\x20COLLAUDO', 'fillStyle', 'Sab', 'cliente', 'open', 'salvaNota', 'block', '5px', 'closest', 'capCittaProvincia', 'dataset', 'stopPropagation', 'completati', 'dettagliCondomino', 'strokeStyle', 'interventiCounter', 'addImage', 'setMonth', 'getBoundingClientRect', 'modTitolo', 'padStart', 'modalNuovaNota', 'DOMContentLoaded', 'calendarioView', '\x20-\x20', 'tbody', '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20', 'Errore\x20nel\x20caricamento\x20dell\x27immagine:\x20', 'DETTAGLI\x20COMMITTENTE\x20/\x20RAPPRESENTANTE\x20/\x20INCARICATO:', 'black', '<td\x20data-label=\x22Appuntamento\x22>', 'forEach', 'join', 'interventiInCorso', 'modIndirizzo', 'touchend', 'database', 'login-active', 'localeCompare', 'oraAppuntamento', 'offsetWidth', 'initializeApp', 'toggle', 'classList', 'height', 'error', 'ref', 'Intervento\x20eliminato\x20definitivamente', 'lineTo', 'ruoloSelezionato', 'mouseout', 'firstChild', '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Titolo\x22>', 'toLocaleTimeString', 'nuovaNota', 'titolo', 'touchstart', 'rows', 'Cliente:\x20', 'once', 'backgroundColor', 'fontSize', 'toDateString', 'add', 'Errore\x20nel\x20caricamento\x20dei\x20dati:\x20', 'split', 'getDay', 'https://i.imgur.com/4aL0pnx.jpg', 'modCliente', 'active', 'Errore\x20nel\x20caricamento\x20dei\x20dati:', 'listaClienti', 'getElementsByTagName', 'reset', 'Intervento\x20ripristinato\x20e\x20da\x20pianificare', 'Cestino\x20svuotato', 'Ven', 'input', 'toString', 'Mar', 'Lun', 'Intervento\x20aggiunto\x20alla\x20lista\x20da\x20pianificare', 'btnNote', 'Sei\x20sicuro\x20di\x20voler\x20eliminare\x20questo\x20contatto\x20dalla\x20rubrica?', 'blob', 'OGGETTO\x20DELL\x27INTERVENTO:', 'btnLogout', 'modalFirmaCollaudo', 'Nome:\x20', 'btnInterventiCompletati', 'Logout\x20effettuato\x20con\x20successo', 'listaNote', 'Errore\x20nello\x20svuotamento\x20del\x20cestino:\x20', 'cestino', 'storage', 'password', '00:00', 'then', '</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22azioni-nota\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22modificaNota(', '35430WJfQMI', '\x20non\x20sono\x20un\x20array:', 'Dati\x20interventi\x20aggiornati:', 'Documento\x20di\x20collaudo\x20caricato\x20su\x20Firebase\x20Storage', 'dataCollaudo', 'helvetica', 'catch', 'modalCollaudo', '<button\x20onclick=\x22visualizzaCollaudo(this)\x22\x20class=\x22btn-pdf\x22><i\x20class=\x22fas\x20fa-file-pdf\x22></i></button>', 'preventDefault', 'log', 'Per\x20favore,\x20inserisci\x20sia\x20il\x20titolo\x20che\x20il\x20contenuto\x20della\x20nota', 'textContent', 'includes', 'priorita', 'Impossibile\x20caricare\x20l\x27immagine:\x20', 'toLocaleDateString', 'nuovoClienteForm', '10px', 'Mer', 'interventoForm', 'normal', 'click', 'tabellaRubrica', 'calendario-giorno', 'interventiInCorsoCounter', 'isArray', 'contains', 'AIzaSyD9U3FXNyb27oIAYoh1wnLfiVvMS_XZvt0', 'CONDOMINE\x20INTERNO', 'Sei\x20sicuro\x20di\x20voler\x20spostare\x20questo\x20intervento\x20nel\x20cestino?', '.role-button', 'getDate', 'alin-44851', 'indirizzo', 'querySelector', 'getElementById', 'annullaModifiche', '3618bhKVrq', 'toLowerCase', 'Funzione\x20confermaFirmaCollaudo\x20chiamata', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Azioni\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22azioni-intervento\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Creata\x20il:\x20', 'btnInterventiInCorso', '50%', 'createElement', 'I\x20dati\x20della\x20rubrica\x20non\x20sono\x20un\x20array:', 'modalAppuntamento', 'mousemove', 'crossOrigin', 'meseAnno', 'text', '...', 'JPEG', 'insertRow', 'formModifica', '973AqFanb', 'valueAsDate', ')\x22\x20class=\x22btn-elimina\x22>Elimina</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '<button\x20onclick=\x22ripristinaIntervento(this)\x22\x20class=\x22btn-ripristina\x22>Ripristina</button>', 'Dati\x20salvati\x20con\x20successo', 'Contatto\x20Rubrica', 'replace', 'beginPath', 'hidden', '<button\x20onclick=\x22apriModalModifica(this)\x22\x20class=\x22btn-modifica\x22><i\x20class=\x22fas\x20fa-pencil-alt\x22></i></button>', 'Errore:\x20', 'onload', '</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Indirizzo\x22>', 'getMonth', '5693148vtpjRn', 'getFullYear', 'titoloNota', 'role', 'datiCollaudo', 'Firma\x20del\x20Committente/Rappresentante/Condomino:', 'length', 'long', 'it-IT', 'Errore\x20nel\x20salvataggio\x20delle\x20modifiche:\x20', '.nav-buttons\x20button', 'mouseup', '1:228406714979:web:920ac170cc508133a0ce56', '10131344vxyXlO', 'innerHTML', 'alin-44851.appspot.com', 'Modifiche\x20salvate\x20con\x20successo', 'splitTextToSize', 'contenuto', 'Sei\x20sicuro\x20di\x20voler\x20svuotare\x20il\x20cestino?\x20Questa\x20azione\x20è\x20irreversibile.', '/note/', 'substring', 'btnInterventi', 'toDataURL', 'children', 'remove', 'PNG', 'onerror', 'getImageData', 'body', 'className', 'rubrica', 'style', 'borderRadius', 'none', ')\x22\x20class=\x22btn-modifica\x22>Modifica</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22eliminaNota(', 'lineCap', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', '/note', 'Data:\x20', 'target', 'map', 'marginRight', 'div', 'interventiCompletati', 'tipoIntervento', 'inCorso', 'nomeRappresentante', 'left', '<button\x20onclick=\x22pianificaAppuntamento(this)\x22\x20class=\x22btn-pianifica\x22><i\x20class=\x22fas\x20fa-calendar-plus\x22></i></button>', 'Errore\x20nell\x27eliminazione\x20definitiva\x20dell\x27intervento:\x20', 'cestinoCounter', 'modPriorita', '_blank', 'submit', 'tabellaCestino', 'con-eventi', 'setFont', 'capCittaProvinciaCliente', '/rubrica', 'from', 'center', 'DICHIARAZIONE\x20DI\x20COLLAUDO:', 'jspdf', 'calendario-giorno\x20vuoto', 'width', 'listaEventiGiorno', 'child', 'Anonymous', 'Errore\x20di\x20login:', 'Dati\x20interventi:', 'numeric', 'Accesso\x20effettuato\x20con\x20successo!', 'Gio', 'svuotaCestino', 'btnCestino', 'bold', 'Nota\x20salvata\x20con\x20successo', 'nota', 'label[for=\x22modTipoIntervento\x22]', 'https://i.imgur.com/Oih79Ss.jpg', 'toast', 'searchRubrica', 'italic', 'selezionato', 'top', 'calendario-giorno-settimana', '/interventi', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>', 'areaFirmaCollaudo', 'Errore\x20nel\x20salvataggio\x20del\x20nuovo\x20cliente:\x20', '1406803DBmFQR', 'getContext', 'getDownloadURL', 'toLocaleString', 'addEventListener', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20data-label=\x22Cliente\x22>', 'querySelectorAll', 'Ruolo:\x20', 'Sei\x20sicuro\x20di\x20voler\x20eliminare\x20questa\x20nota?', 'clientX', 'toISOString', 'Dati\x20rubrica:', 'touches', 'oggettoIntervento', 'Dom', '22790jGieeV', '946684OYrysd', '4325085jFMZEx', '</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>', 'setTextColor', 'Errore\x20durante\x20il\x20logout:\x20', 'info', 'color', 'interventiCompletatiCounter', '3llIYDk', '2-digit', 'value', 'every', 'setFontSize', 'all', 'internal', 'ruoloText', 'display', 'menuToggle', '.main-content', 'btnCalendario', 'set', 'tabellaInterventiCompletati']; _0x5a77 = function () { return _0x3d373b; }; return _0x5a77(); } svuotaCestino[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0x2785a7 = _0x2f75da; confirm(_0x2785a7(0x295)) && (tabellaCestino['innerHTML'] = '', salvaDati()[_0x2785a7(0x23a)](() => showSuccessToast(_0x2785a7(0x224)))[_0x2785a7(0x242)](_0x45d72b => showErrorToast(_0x2785a7(0x235) + _0x45d72b))); }); function pianificaInterventoRubrica(_0x1b02e3) { const _0x231fdc = _0x2f75da, _0x583fd4 = _0x1b02e3[_0x231fdc(0x33f)]('tr'), _0x21f8aa = { 'cliente': _0x583fd4[_0x231fdc(0x305)][0x0]['textContent'], 'indirizzo': _0x583fd4[_0x231fdc(0x305)][0x1][_0x231fdc(0x248)], 'titolo': _0x583fd4[_0x231fdc(0x305)][0x2]['textContent'], 'tipoIntervento': '', 'priorita': _0x583fd4[_0x231fdc(0x305)][0x0]['querySelector']('div')?.[_0x231fdc(0x2a2)]['backgroundColor'] || '' }; aggiungiRigaTabella(tabellaClienti, _0x21f8aa, 'daPianificare'), salvaDati()['then'](() => showSuccessToast(_0x231fdc(0x22a)))[_0x231fdc(0x242)](_0xcd1784 => showErrorToast(_0x231fdc(0x32d) + _0xcd1784)); } function eliminaContattoRubrica(_0x21da5d) { const _0x2cb39f = _0x2f75da; if (confirm(_0x2cb39f(0x22c))) { const _0x240a88 = _0x21da5d[_0x2cb39f(0x33f)]('tr'), _0x377f3b = { 'cliente': _0x240a88['cells'][0x0][_0x2cb39f(0x248)], 'indirizzo': _0x240a88[_0x2cb39f(0x305)][0x1][_0x2cb39f(0x248)], 'titolo': _0x240a88[_0x2cb39f(0x305)][0x2][_0x2cb39f(0x248)], 'tipoIntervento': _0x2cb39f(0x279), 'priorita': _0x240a88[_0x2cb39f(0x305)][0x0][_0x2cb39f(0x25f)](_0x2cb39f(0x2ad))?.[_0x2cb39f(0x2a2)]['backgroundColor'] || '' }; aggiungiRigaTabella(tabellaCestino, _0x377f3b, _0x2cb39f(0x236)), _0x240a88['remove'](), salvaDati()['then'](() => showSuccessToast('Contatto\x20eliminato\x20dalla\x20rubrica\x20e\x20spostato\x20nel\x20cestino'))['catch'](_0x598e39 => showErrorToast('Errore\x20nell\x27eliminazione\x20del\x20contatto\x20dalla\x20rubrica:\x20' + _0x598e39)); } } function mostraCalendario() { const _0x51328d = _0x2f75da; document[_0x51328d(0x260)](_0x51328d(0x1f0))[_0x51328d(0x2a2)][_0x51328d(0x2fd)] = _0x51328d(0x33d), aggiornaCalendario(); } function aggiornaCalendario() { const _0x1ce03b = _0x2f75da, _0x16ef3f = document[_0x1ce03b(0x260)]('calendario'); _0x16ef3f[_0x1ce03b(0x290)] = ''; const _0x469fe3 = new Date(meseCorrente[_0x1ce03b(0x283)](), meseCorrente[_0x1ce03b(0x281)](), 0x1), _0x27d879 = new Date(meseCorrente[_0x1ce03b(0x283)](), meseCorrente[_0x1ce03b(0x281)]() + 0x1, 0x0); document[_0x1ce03b(0x260)](_0x1ce03b(0x26e))[_0x1ce03b(0x248)] = meseCorrente[_0x1ce03b(0x2e0)](_0x1ce03b(0x28a), { 'month': _0x1ce03b(0x289), 'year': _0x1ce03b(0x2c9) }); const _0x10e331 = [_0x1ce03b(0x2eb), _0x1ce03b(0x229), _0x1ce03b(0x228), _0x1ce03b(0x24f), _0x1ce03b(0x2cb), _0x1ce03b(0x225), _0x1ce03b(0x339)]; _0x10e331[_0x1ce03b(0x1f8)](_0x140c08 => { const _0x3dfc18 = _0x1ce03b, _0x2bf35f = document[_0x3dfc18(0x269)]('div'); _0x2bf35f[_0x3dfc18(0x2a0)] = _0x3dfc18(0x2d8), _0x2bf35f[_0x3dfc18(0x248)] = _0x140c08, _0x16ef3f['appendChild'](_0x2bf35f); }); for (let _0x1477d8 = 0x0; _0x1477d8 < _0x469fe3[_0x1ce03b(0x21b)](); _0x1477d8++) { const _0x2e3f08 = document[_0x1ce03b(0x269)](_0x1ce03b(0x2ad)); _0x2e3f08[_0x1ce03b(0x2a0)] = _0x1ce03b(0x2c2), _0x16ef3f[_0x1ce03b(0x325)](_0x2e3f08); } const _0x25f4f6 = Array[_0x1ce03b(0x2be)](tabellaInterventiInCorso[_0x1ce03b(0x212)])['map'](_0x5e2280 => ({ 'cliente': _0x5e2280['cells'][0x0]['textContent'], 'titolo': _0x5e2280['cells'][0x2][_0x1ce03b(0x248)], 'appuntamento': _0x5e2280[_0x1ce03b(0x305)][0x4][_0x1ce03b(0x248)] })); for (let _0x435dc4 = 0x1; _0x435dc4 <= _0x27d879[_0x1ce03b(0x25c)](); _0x435dc4++) { const _0x458420 = document[_0x1ce03b(0x269)](_0x1ce03b(0x2ad)); _0x458420[_0x1ce03b(0x2a0)] = _0x1ce03b(0x254), _0x458420[_0x1ce03b(0x248)] = _0x435dc4; const _0x1ff8d5 = new Date(meseCorrente[_0x1ce03b(0x283)](), meseCorrente[_0x1ce03b(0x281)](), _0x435dc4), _0x3a6f8f = _0x25f4f6['filter'](_0x4c0682 => { const _0x283579 = _0x1ce03b, _0x560e74 = new Date(_0x4c0682['appuntamento'][_0x283579(0x21a)]('\x20')[0x0][_0x283579(0x21a)]('.')[_0x283579(0x30c)]()[_0x283579(0x1f9)]('-')); return _0x560e74[_0x283579(0x217)]() === _0x1ff8d5[_0x283579(0x217)](); }); _0x3a6f8f[_0x1ce03b(0x288)] > 0x0 && _0x458420[_0x1ce03b(0x204)][_0x1ce03b(0x218)](_0x1ce03b(0x2ba)), _0x1ff8d5['toDateString']() === new Date()['toDateString']() && _0x458420[_0x1ce03b(0x204)][_0x1ce03b(0x218)]('oggi'), _0x458420[_0x1ce03b(0x2e1)](_0x1ce03b(0x252), () => { const _0x351bc7 = _0x1ce03b; document[_0x351bc7(0x2e3)]('.calendario-giorno')[_0x351bc7(0x1f8)](_0xe806dc => _0xe806dc[_0x351bc7(0x204)][_0x351bc7(0x29b)](_0x351bc7(0x2d6))), _0x458420[_0x351bc7(0x204)]['add'](_0x351bc7(0x2d6)), mostraEventiGiorno(_0x1ff8d5, _0x3a6f8f); }), _0x16ef3f[_0x1ce03b(0x325)](_0x458420); } } function mostraEventiGiorno(_0x11ce4e, _0x39444f) { const _0x30fd1d = _0x2f75da, _0x1de07e = document[_0x30fd1d(0x260)]('dataSelezionata'), _0x39e98a = document[_0x30fd1d(0x260)](_0x30fd1d(0x2c4)); _0x1de07e[_0x30fd1d(0x248)] = formatDataItaliana(_0x11ce4e), _0x39e98a[_0x30fd1d(0x290)] = ''; if (_0x39444f[_0x30fd1d(0x288)] === 0x0) { const _0x5cbd0e = document['createElement']('li'); _0x5cbd0e[_0x30fd1d(0x248)] = 'Nessun\x20evento\x20per\x20questa\x20data', _0x39e98a[_0x30fd1d(0x325)](_0x5cbd0e); } else _0x39444f[_0x30fd1d(0x336)]((_0x2092fc, _0x429b6b) => { const _0x2a8587 = _0x30fd1d, _0x353bc9 = _0x2092fc[_0x2a8587(0x31e)][_0x2a8587(0x21a)]('\x20')[0x1], _0xe9950 = _0x429b6b['appuntamento'][_0x2a8587(0x21a)]('\x20')[0x1]; return _0x353bc9[_0x2a8587(0x1ff)](_0xe9950); }), _0x39444f['forEach'](_0x285c9e => { const _0x1704ba = _0x30fd1d, _0x167cc2 = document[_0x1704ba(0x269)]('li'); _0x167cc2[_0x1704ba(0x248)] = _0x285c9e['appuntamento'][_0x1704ba(0x21a)]('\x20')[0x1] + _0x1704ba(0x1f1) + _0x285c9e['cliente'] + ':\x20' + _0x285c9e[_0x1704ba(0x210)], _0x39e98a[_0x1704ba(0x325)](_0x167cc2); }); } document[_0x2f75da(0x260)]('prevMonth')['addEventListener']('click', () => { meseCorrente['setMonth'](meseCorrente['getMonth']() - 0x1), aggiornaCalendario(); }), document['getElementById'](_0x2f75da(0x32b))[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0x3790ad = _0x2f75da; meseCorrente[_0x3790ad(0x1ea)](meseCorrente[_0x3790ad(0x281)]() + 0x1), aggiornaCalendario(); }); function aggiornaListaClientiDaPianificare() { } function aggiornaInterventiInCorso() { } function aggiornaInterventiCompletati() { } function aggiornaRubrica() { } function aggiornaListaNote() { const _0x23c6c8 = _0x2f75da; db[_0x23c6c8(0x207)](APP_ID + '/note')[_0x23c6c8(0x214)](_0x23c6c8(0x2f7), _0x3972a5 => { const _0x176f3c = _0x23c6c8, _0x130b5e = _0x3972a5[_0x176f3c(0x30e)]() || []; elencoNote['innerHTML'] = '', _0x130b5e['forEach']((_0x54be72, _0x2a3f71) => { const _0xdf917a = _0x176f3c, _0x43dd45 = document[_0xdf917a(0x269)](_0xdf917a(0x2ad)); _0x43dd45['className'] = _0xdf917a(0x2d0), _0x43dd45[_0xdf917a(0x290)] = _0xdf917a(0x2da) + _0x54be72[_0xdf917a(0x210)] + _0xdf917a(0x2ef) + _0x54be72[_0xdf917a(0x294)][_0xdf917a(0x297)](0x0, 0x64) + (_0x54be72['contenuto'][_0xdf917a(0x288)] > 0x64 ? _0xdf917a(0x270) : '') + _0xdf917a(0x266) + new Date(_0x54be72[_0xdf917a(0x306)])[_0xdf917a(0x2e0)]() + _0xdf917a(0x23b) + _0x2a3f71 + _0xdf917a(0x2a5) + _0x2a3f71 + _0xdf917a(0x276), elencoNote[_0xdf917a(0x325)](_0x43dd45); }); }); } document['getElementById'](_0x2f75da(0x20f))['addEventListener'](_0x2f75da(0x252), () => { const _0x2d2b4f = _0x2f75da; modalNuovaNota['style'][_0x2d2b4f(0x2fd)] = _0x2d2b4f(0x33d), titoloNota['value'] = '', contenutoNota[_0x2d2b4f(0x2f7)] = '', notaSelezionata = null; }), salvaNota[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0x3cc7bf = _0x2f75da, _0x550551 = titoloNota[_0x3cc7bf(0x2f7)], _0x124eae = contenutoNota[_0x3cc7bf(0x2f7)]; _0x550551 && _0x124eae ? db['ref'](APP_ID + _0x3cc7bf(0x2a8))['once'](_0x3cc7bf(0x2f7), _0x2efbbb => { const _0x39d82a = _0x3cc7bf; let _0xf9bab8 = _0x2efbbb[_0x39d82a(0x30e)]() || []; notaSelezionata !== null ? _0xf9bab8[notaSelezionata] = { 'titolo': _0x550551, 'contenuto': _0x124eae, 'data': new Date()[_0x39d82a(0x2e7)]() } : _0xf9bab8[_0x39d82a(0x30b)]({ 'titolo': _0x550551, 'contenuto': _0x124eae, 'data': new Date()['toISOString']() }), db['ref'](APP_ID + '/note')[_0x39d82a(0x301)](_0xf9bab8)['then'](() => { const _0x41542b = _0x39d82a; modalNuovaNota[_0x41542b(0x2a2)][_0x41542b(0x2fd)] = _0x41542b(0x2a4), aggiornaListaNote(), showSuccessToast(_0x41542b(0x2cf)); })[_0x39d82a(0x242)](_0xe78397 => { showErrorToast('Si\x20è\x20verificato\x20un\x20errore\x20durante\x20il\x20salvataggio\x20della\x20nota:\x20' + _0xe78397); }); }) : showErrorToast(_0x3cc7bf(0x247)); }), annullaNota[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0x46b149 = _0x2f75da; modalNuovaNota[_0x46b149(0x2a2)][_0x46b149(0x2fd)] = _0x46b149(0x2a4); }); function modificaNota(_0x2ab86a) { const _0x314d5f = _0x2f75da; db[_0x314d5f(0x207)](APP_ID + '/note/' + _0x2ab86a)[_0x314d5f(0x214)](_0x314d5f(0x2f7), _0x5ebc34 => { const _0x3c95ad = _0x314d5f, _0x30d5ab = _0x5ebc34[_0x3c95ad(0x30e)](); titoloNota[_0x3c95ad(0x2f7)] = _0x30d5ab[_0x3c95ad(0x210)], contenutoNota[_0x3c95ad(0x2f7)] = _0x30d5ab[_0x3c95ad(0x294)], notaSelezionata = _0x2ab86a, modalNuovaNota[_0x3c95ad(0x2a2)]['display'] = _0x3c95ad(0x33d); }); } function eliminaNota(_0x133dc5) { const _0x3a533a = _0x2f75da; confirm(_0x3a533a(0x2e5)) && db[_0x3a533a(0x207)](APP_ID + _0x3a533a(0x296) + _0x133dc5)[_0x3a533a(0x29b)]()['then'](() => { const _0x4ff61c = _0x3a533a; aggiornaListaNote(), showSuccessToast(_0x4ff61c(0x30a)); })[_0x3a533a(0x242)](_0x345cf1 => { showErrorToast('Errore\x20durante\x20l\x27eliminazione\x20della\x20nota:\x20' + _0x345cf1); }); } function apriModalModifica(_0x2a9aca) { const _0x130500 = _0x2f75da, _0x3a6682 = _0x2a9aca['closest']('tr'); clienteSelezionato = _0x3a6682, document[_0x130500(0x260)]('modCliente')[_0x130500(0x2f7)] = _0x3a6682[_0x130500(0x305)][0x0][_0x130500(0x248)], document[_0x130500(0x260)]('modIndirizzo')[_0x130500(0x2f7)] = _0x3a6682[_0x130500(0x305)][0x1][_0x130500(0x248)], document[_0x130500(0x260)](_0x130500(0x1ec))[_0x130500(0x2f7)] = _0x3a6682[_0x130500(0x305)][0x2][_0x130500(0x248)]; const _0x18006a = document['getElementById'](_0x130500(0x32e)), _0x266134 = document[_0x130500(0x25f)](_0x130500(0x2d1)); _0x3a6682['cells'][0x3] ? (_0x18006a[_0x130500(0x2f7)] = _0x3a6682[_0x130500(0x305)][0x3][_0x130500(0x248)], _0x18006a['style'][_0x130500(0x2fd)] = _0x130500(0x33d), _0x266134[_0x130500(0x2a2)][_0x130500(0x2fd)] = _0x130500(0x33d)) : (_0x18006a[_0x130500(0x2a2)]['display'] = _0x130500(0x2a4), _0x266134[_0x130500(0x2a2)][_0x130500(0x2fd)] = _0x130500(0x2a4)); const _0x4e6c73 = document[_0x130500(0x260)]('modPriorita'), _0x566699 = _0x3a6682[_0x130500(0x305)][0x0]['querySelector'](_0x130500(0x2ad)); _0x566699 ? _0x4e6c73[_0x130500(0x2f7)] = _0x566699[_0x130500(0x2a2)]['backgroundColor'] : _0x4e6c73[_0x130500(0x2f7)] = '', modalModifica[_0x130500(0x2a2)]['display'] = _0x130500(0x33d); } formModifica['addEventListener'](_0x2f75da(0x2b8), _0x2ab39b => { const _0x4e9bd8 = _0x2f75da; _0x2ab39b[_0x4e9bd8(0x245)](), clienteSelezionato[_0x4e9bd8(0x305)][0x0][_0x4e9bd8(0x248)] = document[_0x4e9bd8(0x260)](_0x4e9bd8(0x21d))[_0x4e9bd8(0x2f7)], clienteSelezionato[_0x4e9bd8(0x305)][0x1][_0x4e9bd8(0x248)] = document[_0x4e9bd8(0x260)](_0x4e9bd8(0x1fb))[_0x4e9bd8(0x2f7)], clienteSelezionato[_0x4e9bd8(0x305)][0x2]['textContent'] = document[_0x4e9bd8(0x260)](_0x4e9bd8(0x1ec))['value']; clienteSelezionato['cells'][0x3] && (clienteSelezionato['cells'][0x3][_0x4e9bd8(0x248)] = document[_0x4e9bd8(0x260)](_0x4e9bd8(0x32e))[_0x4e9bd8(0x2f7)]); const _0x468a60 = document[_0x4e9bd8(0x260)](_0x4e9bd8(0x2b6))[_0x4e9bd8(0x2f7)]; let _0xa383b8 = clienteSelezionato['cells'][0x0]['querySelector'](_0x4e9bd8(0x2ad)); if (_0x468a60) !_0xa383b8 && (_0xa383b8 = document[_0x4e9bd8(0x269)](_0x4e9bd8(0x2ad)), _0xa383b8[_0x4e9bd8(0x2a2)]['width'] = _0x4e9bd8(0x24e), _0xa383b8['style']['height'] = _0x4e9bd8(0x24e), _0xa383b8[_0x4e9bd8(0x2a2)][_0x4e9bd8(0x2a3)] = _0x4e9bd8(0x268), _0xa383b8[_0x4e9bd8(0x2a2)][_0x4e9bd8(0x2fd)] = _0x4e9bd8(0x323), _0xa383b8[_0x4e9bd8(0x2a2)]['marginRight'] = _0x4e9bd8(0x33e), clienteSelezionato['cells'][0x0][_0x4e9bd8(0x320)](_0xa383b8, clienteSelezionato[_0x4e9bd8(0x305)][0x0][_0x4e9bd8(0x20c)])), _0xa383b8['style'][_0x4e9bd8(0x215)] = _0x468a60; else _0xa383b8 && _0xa383b8[_0x4e9bd8(0x29b)](); modalModifica['style'][_0x4e9bd8(0x2fd)] = _0x4e9bd8(0x2a4), salvaDati()[_0x4e9bd8(0x23a)](() => showSuccessToast(_0x4e9bd8(0x292)))[_0x4e9bd8(0x242)](_0x253d0b => showErrorToast(_0x4e9bd8(0x28b) + _0x253d0b)); }), document['getElementById'](_0x2f75da(0x261))[_0x2f75da(0x2e1)](_0x2f75da(0x252), () => { const _0x1abcaa = _0x2f75da; modalModifica[_0x1abcaa(0x2a2)][_0x1abcaa(0x2fd)] = _0x1abcaa(0x2a4); }), document[_0x2f75da(0x260)](_0x2f75da(0x2d4))[_0x2f75da(0x2e1)](_0x2f75da(0x226), function () { const _0x482d08 = _0x2f75da, _0xfda174 = this['value']['toLowerCase'](); Array[_0x482d08(0x2be)](tabellaRubrica[_0x482d08(0x212)])[_0x482d08(0x1f8)](_0x52d045 => { const _0x3e6db3 = _0x482d08, _0x178fee = _0x52d045[_0x3e6db3(0x248)][_0x3e6db3(0x263)](); _0x52d045[_0x3e6db3(0x2a2)][_0x3e6db3(0x2fd)] = _0x178fee['includes'](_0xfda174) ? '' : _0x3e6db3(0x2a4); }); }), document[_0x2f75da(0x260)]('searchNote')[_0x2f75da(0x2e1)](_0x2f75da(0x226), function () { const _0x5084f9 = _0x2f75da, _0x316fcc = this[_0x5084f9(0x2f7)][_0x5084f9(0x263)](); Array[_0x5084f9(0x2be)](elencoNote[_0x5084f9(0x29a)])[_0x5084f9(0x1f8)](_0x24e3de => { const _0x28e337 = _0x5084f9, _0x57514c = _0x24e3de[_0x28e337(0x248)]['toLowerCase'](); _0x24e3de['style'][_0x28e337(0x2fd)] = _0x57514c[_0x28e337(0x249)](_0x316fcc) ? '' : _0x28e337(0x2a4); }); }), document[_0x2f75da(0x2e1)](_0x2f75da(0x1ef), () => { nascondiElementiPrincipali(); }), window['onclick'] = function (_0x20355e) { const _0x5e11a0 = _0x2f75da; _0x20355e[_0x5e11a0(0x2aa)][_0x5e11a0(0x2a0)] === _0x5e11a0(0x31f) && (_0x20355e[_0x5e11a0(0x2aa)][_0x5e11a0(0x2a2)][_0x5e11a0(0x2fd)] = _0x5e11a0(0x2a4)); }; const roleButtons = document[_0x2f75da(0x2e3)](_0x2f75da(0x25b)), ruoloSelezionato = document['getElementById'](_0x2f75da(0x20a)), condominioInternoDetails = document['getElementById']('condominioInternoDetails'); roleButtons[_0x2f75da(0x1f8)](_0x24cd81 => { const _0x535ae4 = _0x2f75da; _0x24cd81[_0x535ae4(0x2e1)](_0x535ae4(0x252), function () { const _0x554c6f = _0x535ae4; roleButtons[_0x554c6f(0x1f8)](_0x3496a2 => _0x3496a2[_0x554c6f(0x204)]['remove'](_0x554c6f(0x332))), this[_0x554c6f(0x204)][_0x554c6f(0x218)]('selected'), ruoloSelezionato[_0x554c6f(0x2f7)] = this['dataset'][_0x554c6f(0x285)], this[_0x554c6f(0x341)][_0x554c6f(0x285)] === _0x554c6f(0x259) ? condominioInternoDetails[_0x554c6f(0x2a2)][_0x554c6f(0x2fd)] = _0x554c6f(0x33d) : condominioInternoDetails['style'][_0x554c6f(0x2fd)] = _0x554c6f(0x2a4); }); }), document['addEventListener'](_0x2f75da(0x1ef), function () { const _0x3dc89d = _0x2f75da, _0x33d7fe = document[_0x3dc89d(0x260)](_0x3dc89d(0x2fe)), _0x4396b1 = document[_0x3dc89d(0x25f)](_0x3dc89d(0x317)), _0x544624 = document[_0x3dc89d(0x25f)]('.main-content'); _0x33d7fe[_0x3dc89d(0x2e1)]('click', function (_0x186546) { const _0xf52ec3 = _0x3dc89d; _0x186546['stopPropagation'](), _0x4396b1[_0xf52ec3(0x204)][_0xf52ec3(0x203)](_0xf52ec3(0x33b)); }), _0x4396b1[_0x3dc89d(0x2e1)](_0x3dc89d(0x252), function (_0xd90276) { const _0x4c9d66 = _0x3dc89d; _0xd90276[_0x4c9d66(0x2aa)][_0x4c9d66(0x327)] === _0x4c9d66(0x334) && _0x4396b1[_0x4c9d66(0x204)][_0x4c9d66(0x29b)](_0x4c9d66(0x33b)); }), document[_0x3dc89d(0x2e1)](_0x3dc89d(0x252), function (_0x5e743a) { const _0x122e9a = _0x3dc89d; !_0x4396b1[_0x122e9a(0x257)](_0x5e743a[_0x122e9a(0x2aa)]) && !_0x33d7fe[_0x122e9a(0x257)](_0x5e743a[_0x122e9a(0x2aa)]) && _0x4396b1[_0x122e9a(0x204)]['remove'](_0x122e9a(0x33b)); }), _0x4396b1[_0x3dc89d(0x2e1)](_0x3dc89d(0x252), function (_0x379115) { const _0x3a3841 = _0x3dc89d; _0x379115[_0x3a3841(0x342)](); }); });
    </script>
</body>

</html>
